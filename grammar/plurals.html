<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1 Grammar - Plurals | DeutschMind</title>
    <link rel="stylesheet" href="grammar-base.css">
    <style>
        /* Additional styles specific to plurals */
        .pattern-e { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); border-left: 5px solid #2196F3; }
        .pattern-en { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-left: 5px solid #4CAF50; }
        .pattern-er { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); border-left: 5px solid #FF9800; }
        .pattern-s { background: linear-gradient(135deg, #F3E5F5, #E1BEE7); border-left: 5px solid #9C27B0; }
        .pattern-none { background: linear-gradient(135deg, #FCE4EC, #F8BBD0); border-left: 5px solid #E91E63; }
        
        .pattern-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9em;
            margin: 5px;
        }
        
        .badge-e { background: #2196F3; color: white; }
        .badge-en { background: #4CAF50; color: white; }
        .badge-er { background: #FF9800; color: white; }
        .badge-s { background: #9C27B0; color: white; }
        .badge-none { background: #E91E63; color: white; }
        
        .plural-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .plural-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .plural-singular {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .plural-plural {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .plural-english {
            font-style: italic;
            color: #999;
        }
        
        .search-box {
            width: 100%;
            padding: 15px;
            border: 3px solid #667eea;
            border-radius: 25px;
            font-size: 1.1em;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        .filter-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .filter-btn:hover {
            transform: translateY(-2px);
        }
        
        .filter-btn.active {
            transform: scale(1.05);
        }
        
        .filter-btn.active.btn-e { background: #2196F3; color: white; border-color: #2196F3; }
        .filter-btn.active.btn-en { background: #4CAF50; color: white; border-color: #4CAF50; }
        .filter-btn.active.btn-er { background: #FF9800; color: white; border-color: #FF9800; }
        .filter-btn.active.btn-s { background: #9C27B0; color: white; border-color: #9C27B0; }
        .filter-btn.active.btn-none { background: #E91E63; color: white; border-color: #E91E63; }
        
        .infographic {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .pattern-box {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
        }
        
        .pattern-box h4 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .pattern-examples {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .pattern-examples span {
            background: rgba(255,255,255,0.3);
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: 600;
        }
        
        .matching-game {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .matching-column h4 {
            text-align: center;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .match-item {
            background: white;
            border: 3px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .match-item:hover {
            transform: scale(1.05);
            border-color: #667eea;
        }
        
        .match-item.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .match-item.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            cursor: default;
        }
        
        .match-item.incorrect {
            background: #F44336;
            color: white;
            border-color: #F44336;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        @media (max-width: 768px) {
            .matching-game {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<!-- NAVIGATION -->
<div class="top-navigation">
    <a href="../index.html">ğŸ  Home</a>
    <a href="../index.html#levels">ğŸ“š Levels</a>
    <a href="../index.html#categories">ğŸ¯ Categories</a>
    <a href="../tools/progress.html">ğŸ“Š Progress</a>
    <a href="../about.html">â„¹ï¸ About</a>
</div>

<header>
    <h1>ğŸ‡©ğŸ‡ª German Plurals - Die Pluralformen</h1>
    <p>A1 Grammar | Master Plural Patterns with Interactive Learning</p>
    <p class="subtitle">Created by: aliattia02 | DeutschMind</p>
</header>

<div class="container">
    <!-- AUDIO CONTROLS -->
    <div class="audio-controls">
        <h3>ğŸ”Š Audio Settings</h3>
        <div class="control-group">
            <label for="voiceSelect">Voice:</label>
            <select id="voiceSelect">
                <option value="">Loading voices...</option>
            </select>
        </div>
        <div class="control-group">
            <label for="speedControl">Speed:</label>
            <input type="range" id="speedControl" min="0.5" max="1.5" step="0.1" value="0.8">
            <span id="speedValue">0.8x</span>
        </div>
        <div class="control-group">
            <label for="pitchControl">Pitch:</label>
            <input type="range" id="pitchControl" min="0.5" max="2" step="0.1" value="1">
            <span id="pitchValue">1.0</span>
        </div>
        <button class="play-all-btn" onclick="playAllPlurals()">â–¶ Play All Examples</button>
    </div>

    <!-- TABS -->
    <div class="tabs">
        <button class="tab-button active" onclick="showTab('overview')">ğŸ“Š Overview</button>
        <button class="tab-button" onclick="showTab('pattern-e')">ğŸ”µ Pattern -e/Â¨e</button>
        <button class="tab-button" onclick="showTab('pattern-en')">ğŸŸ¢ Pattern -en/-n</button>
        <button class="tab-button" onclick="showTab('pattern-er')">ğŸŸ  Pattern -er/Â¨er</button>
        <button class="tab-button" onclick="showTab('pattern-s')">ğŸŸ£ -s & No Change</button>
        <button class="tab-button" onclick="showTab('all-plurals')">ğŸ“‹ All Together</button>
        <button class="tab-button" onclick="showTab('practice')">ğŸ® Practice Game</button>
    </div>

    <!-- ============================================ -->
    <!-- TAB 1: OVERVIEW                             -->
    <!-- ============================================ -->
    <div id="overview" class="tab-content active">
        <div class="card">
            <h2><span class="section-icon">ğŸ“Š</span>Plural Patterns Overview</h2>
            
            <div class="explanation-box">
                <p>German has <strong>5 main plural patterns</strong>. Unlike English (just add -s), German plural formation depends on the word's gender, ending, and origin.</p>
                <p><strong>Good news:</strong> The plural article is ALWAYS <span class="die-color">die</span> (regardless of the singular gender)!</p>
            </div>

            <div class="infographic">
                <h3 style="text-align: center; margin-bottom: 30px;">ğŸ¨ The 5 Plural Patterns</h3>
                
                <div class="pattern-box">
                    <h4>ğŸ”µ Pattern 1: -e or -Â¨e</h4>
                    <p>Add <strong>-e</strong> or <strong>-Â¨e</strong> (with umlaut on a/o/u)</p>
                    <div class="pattern-examples">
                        <span>der Tisch â†’ die Tische</span>
                        <span>der Stuhl â†’ die StÃ¼hle</span>
                        <span>das Problem â†’ die Probleme</span>
                    </div>
                </div>

                <div class="pattern-box">
                    <h4>ğŸŸ¢ Pattern 2: -en or -n</h4>
                    <p>Add <strong>-en</strong> or <strong>-n</strong> (most feminine nouns)</p>
                    <div class="pattern-examples">
                        <span>die Frau â†’ die Frauen</span>
                        <span>die Blume â†’ die Blumen</span>
                        <span>die TÃ¼r â†’ die TÃ¼ren</span>
                    </div>
                </div>

                <div class="pattern-box">
                    <h4>ğŸŸ  Pattern 3: -er or -Â¨er</h4>
                    <p>Add <strong>-er</strong> or <strong>-Â¨er</strong> (mainly neuter and some masculine)</p>
                    <div class="pattern-examples">
                        <span>das Kind â†’ die Kinder</span>
                        <span>das Buch â†’ die BÃ¼cher</span>
                        <span>der Mann â†’ die MÃ¤nner</span>
                    </div>
                </div>

                <div class="pattern-box">
                    <h4>ğŸŸ£ Pattern 4: -s</h4>
                    <p>Add <strong>-s</strong> (mostly foreign/borrowed words)</p>
                    <div class="pattern-examples">
                        <span>das Auto â†’ die Autos</span>
                        <span>das Hotel â†’ die Hotels</span>
                        <span>das Foto â†’ die Fotos</span>
                    </div>
                </div>

                <div class="pattern-box">
                    <h4>ğŸ”´ Pattern 5: No Change</h4>
                    <p>Stays the same (words ending in -er, -el, -en)</p>
                    <div class="pattern-examples">
                        <span>der Lehrer â†’ die Lehrer</span>
                        <span>der Apfel â†’ die Ã„pfel</span>
                        <span>das Fenster â†’ die Fenster</span>
                    </div>
                </div>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ Important Rules:</strong><br>
                â€¢ ALL plurals use <span class="die-color">die</span> as the article<br>
                â€¢ <strong>Umlaut (Â¨)</strong> changes aâ†’Ã¤, oâ†’Ã¶, uâ†’Ã¼ in many plurals<br>
                â€¢ You MUST memorize the plural with each noun!<br>
                â€¢ Pattern -en/-n is most common (about 40% of all nouns)
            </div>

            <h3>ğŸ“ˆ Quick Statistics</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Pattern</th>
                        <th>Frequency</th>
                        <th>Typical Genders</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="pattern-badge badge-e">-e / -Â¨e</span></td>
                        <td>~30%</td>
                        <td>Masculine, Neuter</td>
                    </tr>
                    <tr>
                        <td><span class="pattern-badge badge-en">-en / -n</span></td>
                        <td>~40%</td>
                        <td>Mostly Feminine</td>
                    </tr>
                    <tr>
                        <td><span class="pattern-badge badge-er">-er / -Â¨er</span></td>
                        <td>~15%</td>
                        <td>Neuter, some Masculine</td>
                    </tr>
                    <tr>
                        <td><span class="pattern-badge badge-s">-s</span></td>
                        <td>~5%</td>
                        <td>Foreign words</td>
                    </tr>
                    <tr>
                        <td><span class="pattern-badge badge-none">No change</span></td>
                        <td>~10%</td>
                        <td>Masculine, Neuter</td>
                    </tr>
                </tbody>
            </table>

            <div class="mnemonic-box">
                <h4>ğŸ§  Memory Trick</h4>
                <p>"<strong>E-N-E-R-S</strong> - Every New English Rabbit Smiles!"</p>
                <div class="hint">The 5 patterns in order of frequency: -en, -e, -er, no change, -s</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 2: PATTERN -e / -Â¨e                     -->
    <!-- ============================================ -->
    <div id="pattern-e" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸ”µ</span>Pattern: -e / -Â¨e</h2>
            
            <div class="explanation-box">
                <p>This pattern adds <strong>-e</strong> to the singular form. Many words also add an <strong>umlaut (Â¨)</strong> on the vowel a, o, or u.</p>
                <p><strong>Common with:</strong> Many masculine and some neuter one-syllable nouns</p>
            </div>

            <h3>ğŸ“˜ Simple -e (no umlaut)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-e" onclick="speak('der Tisch, die Tische')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Tisch â†’ <span class="die-color">die</span> Tisch<strong>e</strong></div>
                    <div class="plural-english">the table â†’ the tables</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('der Hund, die Hunde')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Hund â†’ <span class="die-color">die</span> Hund<strong>e</strong></div>
                    <div class="plural-english">the dog â†’ the dogs</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('das Problem, die Probleme')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Problem â†’ <span class="die-color">die</span> Problem<strong>e</strong></div>
                    <div class="plural-english">the problem â†’ the problems</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('der Tag, die Tage')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Tag â†’ <span class="die-color">die</span> Tag<strong>e</strong></div>
                    <div class="plural-english">the day â†’ the days</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('das Jahr, die Jahre')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Jahr â†’ <span class="die-color">die</span> Jahr<strong>e</strong></div>
                    <div class="plural-english">the year â†’ the years</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('der Beruf, die Berufe')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Beruf â†’ <span class="die-color">die</span> Beruf<strong>e</strong></div>
                    <div class="plural-english">the profession â†’ the professions</div>
                </div>
            </div>

            <h3>ğŸ“— With Umlaut: -Â¨e</h3>
            <div class="example-grid">
                <div class="plural-card pattern-e" onclick="speak('der Stuhl, die StÃ¼hle')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Stuhl â†’ <span class="die-color">die</span> St<strong>Ã¼</strong>hl<strong>e</strong></div>
                    <div class="plural-english">the chair â†’ the chairs</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('die Stadt, die StÃ¤dte')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Stadt â†’ <span class="die-color">die</span> St<strong>Ã¤</strong>dt<strong>e</strong></div>
                    <div class="plural-english">the city â†’ the cities</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('die Hand, die HÃ¤nde')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Hand â†’ <span class="die-color">die</span> H<strong>Ã¤</strong>nd<strong>e</strong></div>
                    <div class="plural-english">the hand â†’ the hands</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('der Sohn, die SÃ¶hne')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Sohn â†’ <span class="die-color">die</span> S<strong>Ã¶</strong>hn<strong>e</strong></div>
                    <div class="plural-english">the son â†’ the sons</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('der Baum, die BÃ¤ume')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Baum â†’ <span class="die-color">die</span> B<strong>Ã¤</strong>um<strong>e</strong></div>
                    <div class="plural-english">the tree â†’ the trees</div>
                </div>
                <div class="plural-card pattern-e" onclick="speak('die Wand, die WÃ¤nde')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Wand â†’ <span class="die-color">die</span> W<strong>Ã¤</strong>nd<strong>e</strong></div>
                    <div class="plural-english">the wall â†’ the walls</div>
                </div>
            </div>

            <div class="key-point">
                <strong>ğŸ¯ When to use umlaut?</strong><br>
                â€¢ One-syllable words with a, o, u usually get umlaut: Ball â†’ B<strong>Ã¤</strong>lle<br>
                â€¢ Multi-syllable words usually don't: Tisch â†’ Tische<br>
                â€¢ Unfortunately, you must memorize each word!
            </div>

            <div class="mnemonic-box">
                <h4>ğŸ§  Memory Trick for Umlaut</h4>
                <p>"<strong>Short and Strong needs the Â¨ song!</strong>"</p>
                <div class="hint">One-syllable masculine nouns often get umlaut + e</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 3: PATTERN -en / -n                     -->
    <!-- ============================================ -->
    <div id="pattern-en" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸŸ¢</span>Pattern: -en / -n</h2>
            
            <div class="explanation-box">
                <p>This is the <strong>MOST COMMON</strong> plural pattern (~40% of all nouns). It's used mostly for <strong>feminine nouns</strong>.</p>
                <p>If the word already ends in <strong>-e</strong>, just add <strong>-n</strong>. Otherwise, add <strong>-en</strong>.</p>
            </div>

            <h3>ğŸ“• Adding -en</h3>
            <div class="example-grid">
                <div class="plural-card pattern-en" onclick="speak('die Frau, die Frauen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Frau â†’ <span class="die-color">die</span> Frau<strong>en</strong></div>
                    <div class="plural-english">the woman â†’ the women</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die TÃ¼r, die TÃ¼ren')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> TÃ¼r â†’ <span class="die-color">die</span> TÃ¼r<strong>en</strong></div>
                    <div class="plural-english">the door â†’ the doors</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Zeit, die Zeiten')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Zeit â†’ <span class="die-color">die</span> Zeit<strong>en</strong></div>
                    <div class="plural-english">the time â†’ the times</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Zahl, die Zahlen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Zahl â†’ <span class="die-color">die</span> Zahl<strong>en</strong></div>
                    <div class="plural-english">the number â†’ the numbers</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Uhr, die Uhren')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Uhr â†’ <span class="die-color">die</span> Uhr<strong>en</strong></div>
                    <div class="plural-english">the clock â†’ the clocks</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Frage, die Fragen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Frage â†’ <span class="die-color">die</span> Frage<strong>n</strong></div>
                    <div class="plural-english">the question â†’ the questions</div>
                </div>
            </div>

            <h3>ğŸ“™ Just adding -n (words ending in -e)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-en" onclick="speak('die Blume, die Blumen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Blume â†’ <span class="die-color">die</span> Blume<strong>n</strong></div>
                    <div class="plural-english">the flower â†’ the flowers</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Lampe, die Lampen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Lampe â†’ <span class="die-color">die</span> Lampe<strong>n</strong></div>
                    <div class="plural-english">the lamp â†’ the lamps</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Schule, die Schulen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Schule â†’ <span class="die-color">die</span> Schule<strong>n</strong></div>
                    <div class="plural-english">the school â†’ the schools</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Katze, die Katzen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Katze â†’ <span class="die-color">die</span> Katze<strong>n</strong></div>
                    <div class="plural-english">the cat â†’ the cats</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Minute, die Minuten')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Minute â†’ <span class="die-color">die</span> Minute<strong>n</strong></div>
                    <div class="plural-english">the minute â†’ the minutes</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('die Seite, die Seiten')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="die-color">die</span> Seite â†’ <span class="die-color">die</span> Seite<strong>n</strong></div>
                    <div class="plural-english">the page/side â†’ the pages/sides</div>
                </div>
            </div>

            <h3>ğŸ““ Masculine nouns with -en (less common)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-en" onclick="speak('der Mensch, die Menschen')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Mensch â†’ <span class="die-color">die</span> Mensch<strong>en</strong></div>
                    <div class="plural-english">the person â†’ the people</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('der Student, die Studenten')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Student â†’ <span class="die-color">die</span> Student<strong>en</strong></div>
                    <div class="plural-english">the student â†’ the students</div>
                </div>
                <div class="plural-card pattern-en" onclick="speak('der Herr, die Herren')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Herr â†’ <span class="die-color">die</span> Herr<strong>en</strong></div>
                    <div class="plural-english">the gentleman â†’ the gentlemen</div>
                </div>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ Easy Rule:</strong><br>
                â€¢ Most feminine nouns use this pattern<br>
                â€¢ Words ending in <strong>-e</strong> just add <strong>-n</strong><br>
                â€¢ Words ending in <strong>-ung, -heit, -keit, -schaft, -tion</strong> always add <strong>-en</strong><br>
                â€¢ This pattern NEVER uses umlaut!
            </div>

            <div class="mnemonic-box">
                <h4>ğŸ§  Memory Trick</h4>
                <p>"<strong>Feminine words are gentle, just add -en!</strong>"</p>
                <div class="hint">If it's feminine and you're not sure, try -en/-n first!</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 4: PATTERN -er / -Â¨er                   -->
    <!-- ============================================ -->
    <div id="pattern-er" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸŸ </span>Pattern: -er / -Â¨er</h2>
            
            <div class="explanation-box">
                <p>This pattern adds <strong>-er</strong> and <strong>almost always</strong> adds an umlaut if the word has a, o, or u.</p>
                <p><strong>Common with:</strong> Many neuter one-syllable nouns and some masculine nouns</p>
            </div>

            <h3>ğŸ“’ Simple -er (no umlaut possible)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-er" onclick="speak('das Ei, die Eier')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Ei â†’ <span class="die-color">die</span> Ei<strong>er</strong></div>
                    <div class="plural-english">the egg â†’ the eggs</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Bild, die Bilder')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Bild â†’ <span class="die-color">die</span> Bild<strong>er</strong></div>
                    <div class="plural-english">the picture â†’ the pictures</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Lied, die Lieder')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Lied â†’ <span class="die-color">die</span> Lied<strong>er</strong></div>
                    <div class="plural-english">the song â†’ the songs</div>
                </div>
            </div>

            <h3>ğŸ“” With Umlaut: -Â¨er (most common)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-er" onclick="speak('das Kind, die Kinder')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Kind â†’ <span class="die-color">die</span> Kind<strong>er</strong></div>
                    <div class="plural-english">the child â†’ the children</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Buch, die BÃ¼cher')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Buch â†’ <span class="die-color">die</span> B<strong>Ã¼</strong>ch<strong>er</strong></div>
                    <div class="plural-english">the book â†’ the books</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Haus, die HÃ¤user')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Haus â†’ <span class="die-color">die</span> H<strong>Ã¤</strong>us<strong>er</strong></div>
                    <div class="plural-english">the house â†’ the houses</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Land, die LÃ¤nder')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Land â†’ <span class="die-color">die</span> L<strong>Ã¤</strong>nd<strong>er</strong></div>
                    <div class="plural-english">the country â†’ the countries</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('der Mann, die MÃ¤nner')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Mann â†’ <span class="die-color">die</span> M<strong>Ã¤</strong>nn<strong>er</strong></div>
                    <div class="plural-english">the man â†’ the men</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Wort, die WÃ¶rter')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Wort â†’ <span class="die-color">die</span> W<strong>Ã¶</strong>rt<strong>er</strong></div>
                    <div class="plural-english">the word â†’ the words</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Dorf, die DÃ¶rfer')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Dorf â†’ <span class="die-color">die</span> D<strong>Ã¶</strong>rf<strong>er</strong></div>
                    <div class="plural-english">the village â†’ the villages</div>
                </div>
                <div class="plural-card pattern-er" onclick="speak('das Glas, die GlÃ¤ser')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Glas â†’ <span class="die-color">die</span> Gl<strong>Ã¤</strong>s<strong>er</strong></div>
                    <div class="plural-english">the glass â†’ the glasses</div>
                </div>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ Pattern Rules:</strong><br>
                â€¢ Mainly one-syllable neuter nouns: das Buch â†’ die BÃ¼cher<br>
                â€¢ Umlaut is almost always added if there's a, o, or u<br>
                â€¢ This is the "super plural" - both ending AND umlaut!<br>
                â€¢ <strong>Exception:</strong> das Kind (no i-umlaut exists!)
            </div>

            <div class="mnemonic-box">
                <h4>ğŸ§  Memory Trick</h4>
                <p>"<strong>-ER is the super power, adds umlaut in the same hour!</strong>"</p>
                <div class="hint">Neuter one-syllable words often get -er + umlaut</div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 5: PATTERN -s & NO CHANGE               -->
    <!-- ============================================ -->
    <div id="pattern-s" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸŸ£</span>Pattern: -s & No Change</h2>
            
            <div class="explanation-box">
                <p>These are the two <strong>easiest</strong> patterns! Pattern <strong>-s</strong> is mostly for foreign/borrowed words, and <strong>no change</strong> is for words ending in -er, -el, -en.</p>
            </div>

            <h3>ğŸŸ£ Pattern -s (Foreign Words)</h3>
            <div class="example-grid">
                <div class="plural-card pattern-s" onclick="speak('das Auto, die Autos')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Auto â†’ <span class="die-color">die</span> Auto<strong>s</strong></div>
                    <div class="plural-english">the car â†’ the cars</div>
                </div>
                <div class="plural-card pattern-s" onclick="speak('das Hotel, die Hotels')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Hotel â†’ <span class="die-color">die</span> Hotel<strong>s</strong></div>
                    <div class="plural-english">the hotel â†’ the hotels</div>
                </div>
                <div class="plural-card pattern-s" onclick="speak('das Foto, die Fotos')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Foto â†’ <span class="die-color">die</span> Foto<strong>s</strong></div>
                    <div class="plural-english">the photo â†’ the photos</div>
                </div>
                <div class="plural-card pattern-s" onclick="speak('das Kino, die Kinos')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Kino â†’ <span class="die-color">die</span> Kino<strong>s</strong></div>
                    <div class="plural-english">the cinema â†’ the cinemas</div>
                </div>
                <div class="plural-card pattern-s" onclick="speak('das Baby, die Babys')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Baby â†’ <span class="die-color">die</span> Baby<strong>s</strong></div>
                    <div class="plural-english">the baby â†’ the babies</div>
                </div>
                <div class="plural-card pattern-s" onclick="speak('das Sofa, die Sofas')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Sofa â†’ <span class="die-color">die</span> Sofa<strong>s</strong></div>
                    <div class="plural-english">the sofa â†’ the sofas</div>
                </div>
            </div>

            <h3>ğŸ”´ Pattern: No Change</h3>
            <div class="example-grid">
                <div class="plural-card pattern-none" onclick="speak('der Lehrer, die Lehrer')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Lehrer â†’ <span class="die-color">die</span> Lehrer</div>
                    <div class="plural-english">the teacher â†’ the teachers</div>
                </div>
                <div class="plural-card pattern-none" onclick="speak('das Fenster, die Fenster')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Fenster â†’ <span class="die-color">die</span> Fenster</div>
                    <div class="plural-english">the window â†’ the windows</div>
                </div>
                <div class="plural-card pattern-none" onclick="speak('der SchÃ¼ler, die SchÃ¼ler')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> SchÃ¼ler â†’ <span class="die-color">die</span> SchÃ¼ler</div>
                    <div class="plural-english">the student â†’ the students</div>
                </div>
                <div class="plural-card pattern-none" onclick="speak('das Zimmer, die Zimmer')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="das-color">das</span> Zimmer â†’ <span class="die-color">die</span> Zimmer</div>
                    <div class="plural-english">the room â†’ the rooms</div>
                </div>
                <div class="plural-card pattern-none" onclick="speak('der Onkel, die Onkel')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Onkel â†’ <span class="die-color">die</span> Onkel</div>
                    <div class="plural-english">the uncle â†’ the uncles</div>
                </div>
                <div class="plural-card pattern-none" onclick="speak('der Apfel, die Ã„pfel')">
                    <span class="audio-icon">ğŸ”Š</span>
                    <div class="plural-singular"><span class="der-color">der</span> Apfel â†’ <span class="die-color">die</span> <strong>Ã„</strong>pfel</div>
                    <div class="plural-english">the apple â†’ the apples</div>
                </div>
            </div>

            <div class="key-point">
                <strong>ğŸ’¡ Easy Recognition:</strong><br>
                â€¢ <strong>-s:</strong> Foreign words, especially ending in -o, -a, -i, -u<br>
                â€¢ <strong>No change:</strong> Words ending in -er, -el, -en, -chen, -lein<br>
                â€¢ <strong>Exception:</strong> Some "no change" words add umlaut: Apfel â†’ Ã„pfel<br>
                â€¢ Article ALWAYS changes: der/das â†’ die
            </div>

            <div class="mnemonic-box">
                <h4>ğŸ§  Memory Tricks</h4>
                <p><strong>Pattern -s:</strong> "Foreign words keep it simple, just add -s!"</p>
                <p><strong>No change:</strong> "Words with -er stay the same, just change the name!" (article)</p>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 6: ALL PLURALS TOGETHER                 -->
    <!-- ============================================ -->
    <div id="all-plurals" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸ“‹</span>All Plurals Together</h2>
            
            <div class="explanation-box">
                <p>Search through all A1 plural nouns, or filter by pattern. Click any word to hear it!</p>
            </div>

            <input type="text" class="search-box" id="searchBox" placeholder="ğŸ” Search in German or English...">

            <div class="filter-buttons">
                <button class="filter-btn btn-all active" onclick="filterByPattern('all')">ğŸ“Œ All</button>
                <button class="filter-btn btn-e" onclick="filterByPattern('e')">ğŸ”µ -e / -Â¨e</button>
                <button class="filter-btn btn-en" onclick="filterByPattern('en')">ğŸŸ¢ -en / -n</button>
                <button class="filter-btn btn-er" onclick="filterByPattern('er')">ğŸŸ  -er / -Â¨er</button>
                <button class="filter-btn btn-s" onclick="filterByPattern('s')">ğŸŸ£ -s</button>
                <button class="filter-btn btn-none" onclick="filterByPattern('none')">ğŸ”´ No Change</button>
            </div>

            <div id="allPluralsList">
                <!-- Generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- TAB 7: PRACTICE GAME                        -->
    <!-- ============================================ -->
    <div id="practice" class="tab-content">
        <div class="card">
            <h2><span class="section-icon">ğŸ®</span>Practice Game - Match Singular to Plural</h2>
            
            <div class="explanation-box">
                <p>Click a singular noun on the left, then click its matching plural on the right!</p>
            </div>

            <div class="progress-container">
                <div class="progress-text">Score: <span id="gameScore">0</span> / <span id="gameTotal">10</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="gameProgress" style="width: 0%"></div>
                </div>
            </div>

            <div class="matching-game">
                <div class="matching-column">
                    <h4>ğŸ“ Singular</h4>
                    <div id="singularColumn">
                        <!-- Generated by JavaScript -->
                    </div>
                </div>
                <div class="matching-column">
                    <h4>ğŸ“ Plural</h4>
                    <div id="pluralColumn">
                        <!-- Generated by JavaScript -->
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="play-all-btn" onclick="resetGame()">ğŸ”„ New Game</button>
            </div>
        </div>
    </div>
</div>

<!-- AUDIO STATUS -->
<div class="audio-status" id="audioStatus">
    <div class="spinner"></div>
    <span id="audioStatusText">Speaking...</span>
</div>

<footer>
    <p><strong>A1 Grammar - German Plurals | DeutschMind</strong></p>
    <p>Created for German Learners | Â© 2025 aliattia02</p>
    <p>ğŸ¯ Click anywhere to hear pronunciation | ğŸ’ª Practice makes perfect!</p>
    
    <h3>ğŸ“š More Grammar Topics:</h3>
    <div class="grammar-links">
        <a href="grammar-articles.html" class="grammar-link">Articles (der/die/das)</a>
        <a href="present-tense.html" class="grammar-link">Present Tense</a>
        <a href="a1-grammar-cases.html" class="grammar-link">Cases</a>
    </div>
    
    <a href="../index.html" class="back-link">â† Back to Home</a>
</footer>

<!-- Load base JavaScript first, then specific JavaScript -->
<script src="grammar-base.js"></script>
<script>
/* ============================================ */
/* PLURALS - SPECIFIC JAVASCRIPT               */
/* ============================================ */

// Complete plurals database
const pluralsData = [
    // Pattern -e
    { singular: 'der Tisch', plural: 'die Tische', english: 'table', pattern: 'e', gender: 'der' },
    { singular: 'der Hund', plural: 'die Hunde', english: 'dog', pattern: 'e', gender: 'der' },
    { singular: 'das Problem', plural: 'die Probleme', english: 'problem', pattern: 'e', gender: 'das' },
    { singular: 'der Tag', plural: 'die Tage', english: 'day', pattern: 'e', gender: 'der' },
    { singular: 'das Jahr', plural: 'die Jahre', english: 'year', pattern: 'e', gender: 'das' },
    { singular: 'der Beruf', plural: 'die Berufe', english: 'profession', pattern: 'e', gender: 'der' },
    { singular: 'der Brief', plural: 'die Briefe', english: 'letter', pattern: 'e', gender: 'der' },
    { singular: 'der Freund', plural: 'die Freunde', english: 'friend', pattern: 'e', gender: 'der' },
    
    // Pattern -Â¨e (with umlaut)
    { singular: 'der Stuhl', plural: 'die StÃ¼hle', english: 'chair', pattern: 'e', gender: 'der' },
    { singular: 'die Stadt', plural: 'die StÃ¤dte', english: 'city', pattern: 'e', gender: 'die' },
    { singular: 'die Hand', plural: 'die HÃ¤nde', english: 'hand', pattern: 'e', gender: 'die' },
    { singular: 'der Sohn', plural: 'die SÃ¶hne', english: 'son', pattern: 'e', gender: 'der' },
    { singular: 'der Baum', plural: 'die BÃ¤ume', english: 'tree', pattern: 'e', gender: 'der' },
    { singular: 'die Wand', plural: 'die WÃ¤nde', english: 'wall', pattern: 'e', gender: 'die' },
    { singular: 'der Ball', plural: 'die BÃ¤lle', english: 'ball', pattern: 'e', gender: 'der' },
    { singular: 'die Nacht', plural: 'die NÃ¤chte', english: 'night', pattern: 'e', gender: 'die' },
    
    // Pattern -en / -n
    { singular: 'die Frau', plural: 'die Frauen', english: 'woman', pattern: 'en', gender: 'die' },
    { singular: 'die TÃ¼r', plural: 'die TÃ¼ren', english: 'door', pattern: 'en', gender: 'die' },
    { singular: 'die Zeit', plural: 'die Zeiten', english: 'time', pattern: 'en', gender: 'die' },
    { singular: 'die Zahl', plural: 'die Zahlen', english: 'number', pattern: 'en', gender: 'die' },
    { singular: 'die Uhr', plural: 'die Uhren', english: 'clock', pattern: 'en', gender: 'die' },
    { singular: 'die Blume', plural: 'die Blumen', english: 'flower', pattern: 'en', gender: 'die' },
    { singular: 'die Lampe', plural: 'die Lampen', english: 'lamp', pattern: 'en', gender: 'die' },
    { singular: 'die Schule', plural: 'die Schulen', english: 'school', pattern: 'en', gender: 'die' },
    { singular: 'die Katze', plural: 'die Katzen', english: 'cat', pattern: 'en', gender: 'die' },
    { singular: 'die Minute', plural: 'die Minuten', english: 'minute', pattern: 'en', gender: 'die' },
    { singular: 'die Seite', plural: 'die Seiten', english: 'page', pattern: 'en', gender: 'die' },
    { singular: 'die Frage', plural: 'die Fragen', english: 'question', pattern: 'en', gender: 'die' },
    { singular: 'der Mensch', plural: 'die Menschen', english: 'person', pattern: 'en', gender: 'der' },
    { singular: 'der Student', plural: 'die Studenten', english: 'student (m)', pattern: 'en', gender: 'der' },
    { singular: 'der Herr', plural: 'die Herren', english: 'gentleman', pattern: 'en', gender: 'der' },
    
    // Pattern -er / -Â¨er
    { singular: 'das Kind', plural: 'die Kinder', english: 'child', pattern: 'er', gender: 'das' },
    { singular: 'das Buch', plural: 'die BÃ¼cher', english: 'book', pattern: 'er', gender: 'das' },
    { singular: 'das Haus', plural: 'die HÃ¤user', english: 'house', pattern: 'er', gender: 'das' },
    { singular: 'das Land', plural: 'die LÃ¤nder', english: 'country', pattern: 'er', gender: 'das' },
    { singular: 'der Mann', plural: 'die MÃ¤nner', english: 'man', pattern: 'er', gender: 'der' },
    { singular: 'das Wort', plural: 'die WÃ¶rter', english: 'word', pattern: 'er', gender: 'das' },
    { singular: 'das Dorf', plural: 'die DÃ¶rfer', english: 'village', pattern: 'er', gender: 'das' },
    { singular: 'das Glas', plural: 'die GlÃ¤ser', english: 'glass', pattern: 'er', gender: 'das' },
    { singular: 'das Ei', plural: 'die Eier', english: 'egg', pattern: 'er', gender: 'das' },
    { singular: 'das Bild', plural: 'die Bilder', english: 'picture', pattern: 'er', gender: 'das' },
    { singular: 'das Lied', plural: 'die Lieder', english: 'song', pattern: 'er', gender: 'das' },
    
    // Pattern -s
    { singular: 'das Auto', plural: 'die Autos', english: 'car', pattern: 's', gender: 'das' },
    { singular: 'das Hotel', plural: 'die Hotels', english: 'hotel', pattern: 's', gender: 'das' },
    { singular: 'das Foto', plural: 'die Fotos', english: 'photo', pattern: 's', gender: 'das' },
    { singular: 'das Kino', plural: 'die Kinos', english: 'cinema', pattern: 's', gender: 'das' },
    { singular: 'das Baby', plural: 'die Babys', english: 'baby', pattern: 's', gender: 'das' },
    { singular: 'das Sofa', plural: 'die Sofas', english: 'sofa', pattern: 's', gender: 'das' },
    { singular: 'das CafÃ©', plural: 'die CafÃ©s', english: 'cafÃ©', pattern: 's', gender: 'das' },
    
    // Pattern: No change
    { singular: 'der Lehrer', plural: 'die Lehrer', english: 'teacher', pattern: 'none', gender: 'der' },
    { singular: 'das Fenster', plural: 'die Fenster', english: 'window', pattern: 'none', gender: 'das' },
    { singular: 'der SchÃ¼ler', plural: 'die SchÃ¼ler', english: 'student', pattern: 'none', gender: 'der' },
    { singular: 'das Zimmer', plural: 'die Zimmer', english: 'room', pattern: 'none', gender: 'das' },
    { singular: 'der Onkel', plural: 'die Onkel', english: 'uncle', pattern: 'none', gender: 'der' },
    { singular: 'der Apfel', plural: 'die Ã„pfel', english: 'apple', pattern: 'none', gender: 'der' },
    { singular: 'der Vater', plural: 'die VÃ¤ter', english: 'father', pattern: 'none', gender: 'der' },
    { singular: 'die Mutter', plural: 'die MÃ¼tter', english: 'mother', pattern: 'none', gender: 'die' }
];

let currentFilter = 'all';
let selectedSingular = null;
let selectedPlural = null;
let gameScore = 0;
let gameData = [];
let matchedPairs = new Set();

/* ============================================ */
/* ALL PLURALS LIST                            */
/* ============================================ */

function renderAllPlurals() {
    const container = document.getElementById('allPluralsList');
    if (!container) return;

    const filtered = currentFilter === 'all' ? 
        pluralsData : 
        pluralsData.filter(item => item.pattern === currentFilter);

    container.innerHTML = '';
    
    filtered.forEach(item => {
        const card = document.createElement('div');
        card.className = `plural-card pattern-${item.pattern}`;
        card.onclick = () => speak(`${item.singular}, ${item.plural}`);
        
        card.innerHTML = `
            <span class="audio-icon">ğŸ”Š</span>
            <div class="plural-singular">${item.singular} â†’ ${item.plural}</div>
            <div class="plural-english">${item.english}</div>
            <span class="pattern-badge badge-${item.pattern}">Pattern: ${getPatternName(item.pattern)}</span>
        `;
        
        container.appendChild(card);
    });
}

function getPatternName(pattern) {
    const names = {
        'e': '-e / -Â¨e',
        'en': '-en / -n',
        'er': '-er / -Â¨er',
        's': '-s',
        'none': 'No Change'
    };
    return names[pattern] || pattern;
}

function filterByPattern(pattern) {
    currentFilter = pattern;
    
    // Update button states
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    renderAllPlurals();
}

/* ============================================ */
/* SEARCH FUNCTIONALITY                        */
/* ============================================ */

function setupSearch() {
    const searchBox = document.getElementById('searchBox');
    if (!searchBox) return;

    searchBox.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        
        if (query === '') {
            renderAllPlurals();
            return;
        }

        const container = document.getElementById('allPluralsList');
        const results = pluralsData.filter(item => 
            item.singular.toLowerCase().includes(query) ||
            item.plural.toLowerCase().includes(query) ||
            item.english.toLowerCase().includes(query)
        );

        container.innerHTML = '';
        
        if (results.length === 0) {
            container.innerHTML = '<p style="text-align: center; padding: 40px; color: #999;">No results found. Try another search term!</p>';
            return;
        }

        results.forEach(item => {
            const card = document.createElement('div');
            card.className = `plural-card pattern-${item.pattern}`;
            card.onclick = () => speak(`${item.singular}, ${item.plural}`);
            
            card.innerHTML = `
                <span class="audio-icon">ğŸ”Š</span>
                <div class="plural-singular">${item.singular} â†’ ${item.plural}</div>
                <div class="plural-english">${item.english}</div>
                <span class="pattern-badge badge-${item.pattern}">Pattern: ${getPatternName(item.pattern)}</span>
            `;
            
            container.appendChild(card);
        });
    });
}

/* ============================================ */
/* MATCHING GAME                               */
/* ============================================ */

function initGame() {
    // Select 10 random items
    const shuffled = pluralsData.slice().sort(() => Math.random() - 0.5);
    gameData = shuffled.slice(0, 10);
    gameScore = 0;
    matchedPairs.clear();
    selectedSingular = null;
    selectedPlural = null;

    renderGame();
    updateGameProgress();
}

function renderGame() {
    const singularCol = document.getElementById('singularColumn');
    const pluralCol = document.getElementById('pluralColumn');
    
    if (!singularCol || !pluralCol) return;

    singularCol.innerHTML = '';
    pluralCol.innerHTML = '';

    // Shuffle the plurals
    const shuffledPlurals = gameData.slice().sort(() => Math.random() - 0.5);

    gameData.forEach((item, index) => {
        const singularItem = document.createElement('div');
        singularItem.className = 'match-item';
        singularItem.id = `singular-${index}`;
        singularItem.textContent = item.singular;
        singularItem.onclick = () => selectSingular(index);
        
        if (matchedPairs.has(index)) {
            singularItem.classList.add('correct');
            singularItem.onclick = null;
        }
        
        singularCol.appendChild(singularItem);
    });

    shuffledPlurals.forEach((item, index) => {
        const originalIndex = gameData.indexOf(item);
        const pluralItem = document.createElement('div');
        pluralItem.className = 'match-item';
        pluralItem.id = `plural-${originalIndex}`;
        pluralItem.textContent = item.plural;
        pluralItem.onclick = () => selectPlural(originalIndex);
        
        if (matchedPairs.has(originalIndex)) {
            pluralItem.classList.add('correct');
            pluralItem.onclick = null;
        }
        
        pluralCol.appendChild(pluralItem);
    });
}

function selectSingular(index) {
    if (matchedPairs.has(index)) return;

    // Clear previous selection
    document.querySelectorAll('#singularColumn .match-item').forEach(item => {
        item.classList.remove('selected');
    });

    const item = document.getElementById(`singular-${index}`);
    item.classList.add('selected');
    selectedSingular = index;

    // If plural already selected, check match
    if (selectedPlural !== null) {
        checkMatch();
    }
}

function selectPlural(index) {
    if (matchedPairs.has(index)) return;

    // Clear previous selection
    document.querySelectorAll('#pluralColumn .match-item').forEach(item => {
        item.classList.remove('selected');
    });

    const item = document.getElementById(`plural-${index}`);
    item.classList.add('selected');
    selectedPlural = index;

    // If singular already selected, check match
    if (selectedSingular !== null) {
        checkMatch();
    }
}

function checkMatch() {
    if (selectedSingular === selectedPlural) {
        // Correct match!
        gameScore++;
        matchedPairs.add(selectedSingular);

        const singularItem = document.getElementById(`singular-${selectedSingular}`);
        const pluralItem = document.getElementById(`plural-${selectedPlural}`);
        
        singularItem.classList.remove('selected');
        pluralItem.classList.remove('selected');
        singularItem.classList.add('correct');
        pluralItem.classList.add('correct');

        const item = gameData[selectedSingular];
        speak(`${item.singular}, ${item.plural}`);

        // Disable clicking
        singularItem.onclick = null;
        pluralItem.onclick = null;

        updateGameProgress();

        // Check if game complete
        if (gameScore === gameData.length) {
            setTimeout(() => {
                alert('ğŸ‰ Congratulations! You matched all pairs!\n\nScore: ' + gameScore + '/' + gameData.length);
            }, 500);
        }
    } else {
        // Incorrect match
        const singularItem = document.getElementById(`singular-${selectedSingular}`);
        const pluralItem = document.getElementById(`plural-${selectedPlural}`);
        
        singularItem.classList.add('incorrect');
        pluralItem.classList.add('incorrect');

        setTimeout(() => {
            singularItem.classList.remove('selected', 'incorrect');
            pluralItem.classList.remove('selected', 'incorrect');
        }, 800);
    }

    selectedSingular = null;
    selectedPlural = null;
}

function updateGameProgress() {
    const scoreDisplay = document.getElementById('gameScore');
    const totalDisplay = document.getElementById('gameTotal');
    const progressFill = document.getElementById('gameProgress');

    if (scoreDisplay) scoreDisplay.textContent = gameScore;
    if (totalDisplay) totalDisplay.textContent = gameData.length;
    if (progressFill) {
        progressFill.style.width = `${(gameScore / gameData.length) * 100}%`;
    }
}

function resetGame() {
    initGame();
}

/* ============================================ */
/* PLAY ALL PLURALS                            */
/* ============================================ */

function playAllPlurals() {
    const examples = [
        'der Tisch, die Tische',
        'der Stuhl, die StÃ¼hle',
        'die Frau, die Frauen',
        'die Blume, die Blumen',
        'das Kind, die Kinder',
        'das Buch, die BÃ¼cher',
        'das Auto, die Autos',
        'der Lehrer, die Lehrer'
    ];
    
    console.log(`ğŸ”Š Playing ${examples.length} plural examples...`);
    if (window.GrammarBase && window.GrammarBase.speakSequentially) {
        window.GrammarBase.speakSequentially(examples, 2000);
    }
}

/* ============================================ */
/* INITIALIZE                                  */
/* ============================================ */

function initializePluralsPage() {
    console.log('ğŸ“Š Initializing Plurals Page...');
    
    setTimeout(() => {
        renderAllPlurals();
        setupSearch();
        initGame();
        console.log('âœ… Plurals Page Ready!');
    }, 100);
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializePluralsPage);
} else {
    initializePluralsPage();
}

// Make functions globally accessible
window.filterByPattern = filterByPattern;
window.resetGame = resetGame;
window.playAllPlurals = playAllPlurals;
</script>

</body>
</html>