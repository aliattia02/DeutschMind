<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Vocabulary - Interactive Audio Learning - Allgemeine Rechtskunde und Gesundheitsverwaltung</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(90deg, #000000, #DD0000, #FFCE00);
            color: white;
            text-align: center;
            padding: 40px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .audio-controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .audio-controls h3 {
            color: #667eea;
            margin-bottom: 10px;
            width: 100%;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 600;
            color: #333;
        }

        .control-group select,
        .control-group input {
            padding: 8px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
        }

        .play-all-btn {
            background: linear-gradient(135deg, #DD0000, #FFCE00);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .play-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .tab-button {
            background: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tab-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background: #DD0000;
            color: white;
        }

        .tab-button.active {
            background: #DD0000;
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #DD0000;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #FFCE00;
            padding-bottom: 10px;
        }

        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .vocab-table th {
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }

        /* COLOR-CODED HEADERS FOR EACH ARTICLE */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der th {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .vocab-table.das th {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }

        .vocab-table.die th {
            background: linear-gradient(135deg, #F44336, #D32F2F);
        }

        .vocab-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        .vocab-table tr {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* PERMANENT COLOR-CODED ROW BACKGROUNDS */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der tbody tr {
            background: #E3F2FD;
        }

        .vocab-table.das tbody tr {
            background: #E8F5E9;
        }

        .vocab-table.die tbody tr {
            background: #FFEBEE;
        }

        /* DARKER ON HOVER */
        .vocab-table.der tbody tr:hover {
            background: #BBDEFB;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
        }

        .vocab-table.das tbody tr:hover {
            background: #C8E6C9;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
        }

        .vocab-table.die tbody tr:hover {
            background: #FFCDD2;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.3);
        }

        .article {
            font-weight: bold;
            font-size: 1.1em;
        }

        /* COLOR-CODED ARTICLES AND WORDS */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der .article,
        .vocab-table.der .german-word {
            color: #1565C0;
            font-weight: 700;
        }

        .vocab-table.das .article,
        .vocab-table.das .german-word {
            color: #2E7D32;
            font-weight: 700;
        }

        .vocab-table.die .article,
        .vocab-table.die .german-word {
            color: #C62828;
            font-weight: 700;
        }
        /* MOBILE-RESPONSIVE NOUNS TABLE */
        @media (max-width: 768px) {
            .vocab-table {
                display: none; /* Hide table on mobile */
            }

            .mobile-noun-card {
                display: block;
                background: white;
                border-left: 5px solid;
                border-radius: 8px;
                padding: 15px;
                margin: 10px 0;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .mobile-noun-card.der {
                border-color: #2196F3;
                background: #E3F2FD;
            }

            .mobile-noun-card.das {
                border-color: #4CAF50;
                background: #E8F5E9;
            }

            .mobile-noun-card.die {
                border-color: #F44336;
                background: #FFEBEE;
            }

            .mobile-noun-card:active {
                transform: scale(0.98);
            }

            .mobile-noun-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
            }

            .mobile-article-word {
                font-size: 1.3em;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .mobile-article-word.der {
                color: #1565C0;
            }

            .mobile-article-word.das {
                color: #2E7D32;
            }

            .mobile-article-word.die {
                color: #C62828;
            }

            .mobile-audio-btn {
                background: #FFCE00;
                border: none;
                padding: 8px 12px;
                border-radius: 15px;
                font-size: 1.1em;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }

            .mobile-audio-btn:active {
                transform: scale(0.95);
            }

            .mobile-noun-details {
                display: grid;
                grid-template-columns: auto 1fr;
                gap: 8px 12px;
                font-size: 0.95em;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(0,0,0,0.1);
            }

            .mobile-label {
                font-weight: 600;
                color: #666;
            }

            .mobile-plural {
                color: #764ba2;
                font-style: italic;
                font-weight: 600;
            }

            .mobile-english {
                color: #444;
            }

            /* Show mobile cards only on mobile */
            .mobile-noun-cards {
                display: none;
            }

            @media (max-width: 768px) {
                .mobile-noun-cards {
                    display: block;
                }
            }
        }

        /* Desktop: hide mobile cards */
        @media (min-width: 769px) {
            .mobile-noun-cards {
                display: none;
            }
        }
        .german-word {
            font-size: 1.2em;
        }

        .english-word {
            color: #666;
        }

        .plural {
            color: #764ba2;
            font-style: italic;
            font-weight: 600;
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .word-pair {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            cursor: pointer;
        }

        .word-pair:hover {
            transform: scale(1.05);
        }

        .word-pair .german {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .word-pair .english {
            font-size: 1em;
            opacity: 0.9;
        }

        .opposite-arrow {
            font-size: 1.5em;
            margin: 10px 0;
        }

        .word-pair .card-audio-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .word-pair .card-audio-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .expression-list {
            list-style: none;
            padding: 0;
        }

        .expression-item {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 20px;
            border-left: 5px solid #DD0000;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .expression-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            background: #fff;
        }

        .expression-german {
            font-size: 1.4em;
            font-weight: bold;
            color: #000;
            margin-bottom: 5px;
        }

        .expression-english {
            font-size: 1.1em;
            color: #666;
        }

        .conversation {
            margin: 20px 0;
        }

        .message {
            margin: 15px 0;
            padding: 15px 20px;
            border-radius: 20px;
            max-width: 80%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .message:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transform: translateX(5px);
        }

        .message-a {
            background: #667eea;
            color: white;
            margin-left: 0;
            border-bottom-left-radius: 5px;
        }

        .message-b {
            background: #f093fb;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .message-german {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .message-english {
            font-size: 0.95em;
            opacity: 0.9;
            font-style: italic;
        }

        .qa-container {
            display: grid;
            gap: 20px;
        }

        .qa-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .qa-card:hover {
            border-color: #DD0000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .question {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .answer {
            font-size: 1.1em;
            color: #333;
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }

        .qa-card:hover .answer {
            display: block;
        }

        .sentence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .sentence-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sentence-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .sentence-german {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .sentence-english {
            font-size: 1em;
            opacity: 0.9;
        }

        .audio-btn {
            background: #FFCE00;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .audio-btn:hover {
            background: #DD0000;
            color: white;
            transform: scale(1.1);
        }

        .audio-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }

        .audio-status.show {
            display: flex;
        }

        .audio-status .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
        }

        footer p {
            margin: 10px 0;
        }

        .section-icon {
            font-size: 2em;
            margin-right: 10px;
            vertical-align: middle;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            .tabs {
                flex-direction: column;
            }
            .tab-button {
                width: 100%;
            }
            .word-grid {
                grid-template-columns: 1fr;
            }
            .sentence-grid {
                grid-template-columns: 1fr;
            }
            .message {
                max-width: 90%;
            }
            .audio-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<!-- NAVIGATION -->
<div style="background: #000; padding: 15px; text-align: center;">
    <a href="../index.html" style="color: #FFCE00; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üè† Home</a>
    <a href="../index.html#levels" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üìö Levels</a>
    <a href="../index.html#categories" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üéØ Categories</a>
    <a href="../tools/progress.html" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üìä Progress</a>
    <a href="../about.html" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">‚ÑπÔ∏è About</a>
</div>

    <!-- ============================================ -->
    <!-- EDIT SECTION 1: HEADER INFORMATION -->
    <!-- ============================================ -->
    <header>
        <h1>üá©üá™ Allgemeine Rechtskunde und Gesundheitsverwaltung</h1>
        <p id="headerTopic">Allgemeine Rechtskunde und Gesundheitsverwaltung | Interactive Audio Learning</p>
        <p style="font-size: 0.9em; margin-top: 10px;"Created by: aliattia02 | Date: 2025-11-16</p>
    </header>

    <div class="container">
        <div class="audio-controls">
            <h3>üîä Audio Settings</h3>
            <div class="control-group">
                <label for="voiceSelect">Voice:</label>
                <select id="voiceSelect">
                    <option value="">Loading voices...</option>
                </select>
            </div>
            <div class="control-group">
                <label for="speedControl">Speed:</label>
                <input type="range" id="speedControl" min="0.5" max="1.5" step="0.1" value="0.8">
                <span id="speedValue">0.8x</span>
            </div>
            <div class="control-group">
                <label for="pitchControl">Pitch:</label>
                <input type="range" id="pitchControl" min="0.5" max="2" step="0.1" value="1">
                <span id="pitchValue">1.0</span>
            </div>
            <button class="play-all-btn" onclick="playAllInSection()">‚ñ∂ Play All in Section</button>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('nouns')">üìö Nouns</button>
            <button class="tab-button" onclick="showTab('adjectives')">‚ú® Adjectives</button>
            <button class="tab-button" onclick="showTab('verbs')">‚ö° Verbs</button>
            <button class="tab-button" onclick="showTab('expressions')">üí¨ Key Expressions</button>
            <button class="tab-button" onclick="showTab('conversations')">üó£Ô∏è Conversations</button>
            <button class="tab-button" onclick="showTab('qa')">‚ùì Q&A Practice</button>
            <button class="tab-button" onclick="showTab('sentences')">üìù Quick Sentences</button>
        </div>

        <div id="nouns" class="tab-content active">
            <div class="card">
                <h2><span class="section-icon">üìö</span>Nouns - Die Nomen</h2>
                <div id="nounsContainer"></div>
            </div>
        </div>

        <div id="adjectives" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ú®</span>Adjectives - Die Adjektive</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any card to hear the pronunciation!</p>
                <div id="adjectivesContainer" class="word-grid"></div>
            </div>
        </div>

        <div id="verbs" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ö°</span>Verbs - Die Verben</h2>
                <p style="margin-bottom: 20px;"><strong>*</strong> = Weak Verb | <strong>+</strong> = Strong Verb</p>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any card to hear the pronunciation!</p>
                <div id="verbsContainer" class="word-grid"></div>
            </div>
        </div>

        <div id="expressions" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üí¨</span>Key Expressions - Wichtige Ausdr√ºcke</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any expression to hear the pronunciation!</p>
                <ul id="expressionsContainer" class="expression-list"></ul>
            </div>
        </div>

        <div id="conversations" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üó£Ô∏è</span>Mini Conversations - Kurze Gespr√§che</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any message to hear it!</p>
                <div id="conversationsContainer"></div>
            </div>
        </div>

        <div id="qa" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ùì</span>Q&A Practice - Fragen und Antworten</h2>
                <p style="margin-bottom: 20px; font-style: italic; color: #666;">üí° Hover over each card to see the answer, or click to hear it!</p>
                <div id="qaContainer" class="qa-container"></div>
            </div>
        </div>

        <div id="sentences" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üìù</span>Quick Sentences - Schnelle S√§tze</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any sentence to hear it!</p>
                <div id="sentencesContainer" class="sentence-grid"></div>
            </div>
        </div>
    </div>

    <div class="audio-status" id="audioStatus">
        <div class="spinner"></div>
        <span id="audioStatusText">Speaking...</span>
    </div>

    <footer>
        <p><strong>German Vocabulary - Interactive Audio Learning</strong></p>
        <p>Created for German Learners | ¬© 2025 aliattia02</p>
        <p>üîß Interactive Audio Learning Platform</p>
        <p style="margin-top: 20px; font-size: 0.9em;">
            üéØ Click anywhere to hear pronunciation | üí™ Practice makes perfect!
        </p>
        <p style="margin-top: 10px; font-size: 0.8em; opacity: 0.8;">
            Last Updated: 2025-11-16
        </p>
    </footer>

    <script>

// ============================================
// TOPIC: ARZNEIMITTELRECHT (Pharmaceutical Law)
// ============================================

// ============================================
// EDIT SECTION 2: CSV DATA - NOUNS
// ============================================
const nounsCSV = `
das,Recht,-e,die Rechte,Law/Right
das,Rechtssystem,-e,die Rechtssysteme,Legal system
das,Grundgesetz,-e,die Grundgesetze,Basic Law/Constitution
das,Zivilrecht,---,---,Civil law
das,Strafrecht,---,---,Criminal law
das,Verwaltungsrecht,---,---,Administrative law
das,Staatsrecht,---,---,Constitutional law
das,V√∂lkerrecht,---,---,International law
das,Europarecht,---,---,European law
das,Verwaltungsverfahren,=,die Verwaltungsverfahren,Administrative procedure
das,Gerichtsverfahren,=,die Gerichtsverfahren,Court procedure
das,Gesetzgebungsverfahren,=,die Gesetzgebungsverfahren,Legislative procedure
das,Grundrecht,-e,die Grundrechte,Fundamental right
das,Justizgrundrecht,-e,die Justizgrundrechte,Judicial fundamental right
das,Bundesstaatsprinzip,-ien,die Bundesstaatsprinzipien,Federal principle
das,Gewaltenteilungsprinzip,-ien,die Gewaltenteilungsprinzipien,Separation of powers principle
das,Demokratieprinzip,-ien,die Demokratieprinzipien,Democratic principle
das,Legalit√§tsprinzip,-ien,die Legalit√§tsprinzipien,Legality principle
das,Opportunit√§tsprinzip,-ien,die Opportunit√§tsprinzipien,Opportunity principle
das,Gesetzlichkeitsprinzip,-ien,die Gesetzlichkeitsprinzipien,Principle of legality
das,Selbstbelastungsverbot,-e,die Selbstbelastungsverbote,Prohibition of self-incrimination
das,R√ºckwirkungsverbot,-e,die R√ºckwirkungsverbote,Prohibition of retroactivity
das,Doppelbestrafungsverbot,-e,die Doppelbestrafungsverbote,Prohibition of double jeopardy
das,Ausnahmegericht,-e,die Ausnahmegerichte,Exceptional court
das,Sondergericht,-e,die Sondergerichte,Special court
das,Verwaltungsgericht,-e,die Verwaltungsgerichte,Administrative court
das,Oberverwaltungsgericht,-e,die Oberverwaltungsgerichte,Higher administrative court
das,Bundesverwaltungsgericht,-e,die Bundesverwaltungsgerichte,Federal Administrative Court
das,Sozialgericht,-e,die Sozialgerichte,Social court
das,Arbeitsgericht,-e,die Arbeitsgerichte,Labor court
das,Finanzgericht,-e,die Finanzgerichte,Tax court
das,Amtsgericht,Amtsgerichte,die Amtsgerichte,Local court
das,Landgericht,-e,die Landgerichte,Regional court
das,Oberlandesgericht,-e,die Oberlandesgerichte,Higher Regional Court
das,Bundesverfassungsgericht,-e,die Bundesverfassungsgerichte,Federal Constitutional Court
das,Ermessen,=,die Ermessen,Discretion
das,Gesetzesvorbehalt,-e,die Gesetzesvorbehalte,Reservation of law
das,√úber-Unterordnungsverh√§ltnis,-se,die √úber-Unterordnungsverh√§ltnisse,Hierarchical relationship
das,Gleichordnungsverh√§ltnis,-se,die Gleichordnungsverh√§ltnisse,Equal relationship
das,Parlament,-e,die Parlamente,Parliament
das,Bundesgesetzblatt,Bundesgesetzbl√§tter,die Bundesgesetzbl√§tter,Federal Law Gazette
das,Bundesland,Bundesl√§nder,die Bundesl√§nder,Federal state
das,Ministerium,Ministerien,die Ministerien,Ministry
das,Gesundheitsministerium,Gesundheitsministerien,die Gesundheitsministerien,Ministry of Health
das,Staatsministerium,Staatsministerien,die Staatsministerien,State Ministry
das,Landesamt,Landes√§mter,die Landes√§mter,State Office
das,Bundesamt,Bundes√§mter,die Bundes√§mter,Federal Office
das,Regierungspr√§sidium,Regierungspr√§sidien,die Regierungspr√§sidien,District Government
das,Landratsamt,Landrats√§mter,die Landrats√§mter,District Office
das,Gesundheitsamt,Gesundheits√§mter,die Gesundheits√§mter,Public Health Office
das,Veterin√§ramt,Veterin√§r√§mter,die Veterin√§r√§mter,Veterinary Office
das,Hoheitsrecht,-e,die Hoheitsrechte,Sovereign right
das,Satzungsrecht,-e,die Satzungsrechte,Bylaw authority
das,Prim√§rrecht,-e,die Prim√§rrechte,Primary law
das,Sekund√§rrecht,-e,die Sekund√§rrechte,Secondary law
das,Formblatt,Formbl√§tter,die Formbl√§tter,Form
das,Zitiergebot,-e,die Zitiergebote,Citation requirement
der,Gesetzgeber,=,die Gesetzgeber,Legislator
der,Staat,-en,die Staaten,State
der,Bund,B√ºnde,die B√ºnde,Federation
der,Bundesrat,Bundesr√§te,die Bundesr√§te,Federal Council
der,Bundestag,-e,die Bundestage,Federal Parliament
der,Landtag,-e,die Landtage,State Parliament
der,Bundespr√§sident,-en,die Bundespr√§sidenten,Federal President
der,Bundeskanzler,=,die Bundeskanzler,Federal Chancellor
der,Bundesminister,=,die Bundesminister,Federal Minister
der,Ministerpr√§sident,-en,die Ministerpr√§sidenten,Minister President
der,Abgeordnete,-n,die Abgeordneten,Member of Parliament
der,B√ºrger,=,die B√ºrger,Citizen
der,Richter,=,die Richter,Judge
der,Berufsrichter,=,die Berufsrichter,Professional judge
der,Ehrenamtliche Richter,=,die Ehrenamtlichen Richter,Lay judge
der,Sch√∂ffe,-n,die Sch√∂ffen,Lay assessor
der,Staatsanwalt,Staatsanw√§lte,die Staatsanw√§lte,Prosecutor
der,Rechtsanwalt,Rechtsanw√§lte,die Rechtsanw√§lte,Lawyer
der,Angeklagte,-n,die Angeklagten,Accused/Defendant
der,Beklagte,-n,die Beklagten,Defendant
der,Kl√§ger,=,die Kl√§ger,Plaintiff
der,Bescheid,-e,die Bescheide,Decision/Notice
der,Verwaltungsakt,-e,die Verwaltungsakte,Administrative act
der,Gesetzentwurf,Gesetzentw√ºrfe,die Gesetzentw√ºrfe,Bill/Draft law
der,Beschluss,Beschl√ºsse,die Beschl√ºsse,Resolution/Decision
der,Einspruch,Einspr√ºche,die Einspr√ºche,Objection
der,Widerspruch,Widerspr√ºche,die Widerspr√ºche,Administrative appeal
der,Rechtsbehelf,-e,die Rechtsbehelfe,Legal remedy
der,Instanzenweg,-e,die Instanzenwege,Hierarchy of courts
der,Gerichtsbescheid,-e,die Gerichtsbescheide,Court order
der,Haftbefehl,-e,die Haftbefehle,Arrest warrant
der,Durchsuchungsbefehl,-e,die Durchsuchungsbefehle,Search warrant
der,Freiheitsentzug,Freiheitsentz√ºge,die Freiheitsentz√ºge,Deprivation of liberty
der,Gewahrsam,=,die Gewahrsame,Custody
der,Vertragspartner,=,die Vertragspartner,Contracting party
der,Mandant,-en,die Mandanten,Client
der,Auftraggeber,=,die Auftraggeber,Principal
der,Sachverhalt,-e,die Sachverhalte,Facts of the case
der,Sachverst√§nde,-n,die Sachverst√§ndigen,Expert
der,Zeuge,-n,die Zeugen,Witness
der,Betroffene,-n,die Betroffenen,Person concerned
der,Streitwert,-e,die Streitwerte,Value in dispute
der,Vollzug,Vollz√ºge,die Vollz√ºge,Enforcement
der,Versto√ü,Verst√∂√üe,die Verst√∂√üe,Violation
der,Eingriff,-e,die Eingriffe,Intervention/Infringement
der,Rechtsweg,-e,die Rechtswege,Legal recourse
der,Wahlhelfer,=,die Wahlhelfer,Election assistant
der,Volksz√§hler,=,die Volksz√§hler,Census taker
der,Feuerwehrdienst,-e,die Feuerwehrdienste,Fire service
der,Sch√∂ffendienst,-e,die Sch√∂ffendienste,Lay judge service
der,Vertrag,Vertr√§ge,die Vertr√§ge,Contract/Treaty
der,Kaufvertrag,Kaufvertr√§ge,die Kaufvertr√§ge,Purchase contract
der,Mietvertrag,Mietvertr√§ge,die Mietvertr√§ge,Rental contract
der,Arbeitsvertrag,Arbeitsvertr√§ge,die Arbeitsvertr√§ge,Employment contract
der,Werkvertrag,Werkvertr√§ge,die Werkvertr√§ge,Contract for work
der,EU-Vertrag,EU-Vertr√§ge,die EU-Vertr√§ge,EU Treaty
der,Mitgliedstaat,-en,die Mitgliedstaaten,Member state
der,Geltungsbereich,-e,die Geltungsbereiche,Scope of application
der,Zust√§ndigkeit,-en,die Zust√§ndigkeiten,Jurisdiction/Competence
der,Handlungsspielraum,Handlungsspielr√§ume,die Handlungsspielr√§ume,Room for maneuver
der,Gesetzesvollzug,Gesetzesvollz√ºge,die Gesetzesvollz√ºge,Law enforcement
der,Stufenplan,Stufenpl√§ne,die Stufenpl√§ne,Graduated plan
die,Rechtskunde,---,---,Legal studies
die,Gesundheitsverwaltung,-en,die Gesundheitsverwaltungen,Health administration
die,Gesetzgebung,-en,die Gesetzgebungen,Legislation
die,Legislative,---,---,Legislature
die,Exekutive,---,---,Executive
die,Judikative,---,---,Judiciary
die,Rechtsprechung,-en,die Rechtsprechungen,Jurisprudence
die,Verwaltung,-en,die Verwaltungen,Administration
die,Beh√∂rde,-n,die Beh√∂rden,Authority
die,Oberste Landesgesundheitsbeh√∂rde,-n,die Obersten Landesgesundheitsbeh√∂rden,Supreme State Health Authority
die,H√∂here Landesgesundheitsbeh√∂rde,-n,die H√∂heren Landesgesundheitsbeh√∂rden,Higher State Health Authority
die,Untere Landesgesundheitsbeh√∂rde,-n,die Unteren Landesgesundheitsbeh√∂rden,Lower State Health Authority
die,Bezirksregierung,-en,die Bezirksregierungen,District government
die,Kreisverwaltungsbeh√∂rde,-n,die Kreisverwaltungsbeh√∂rden,District administrative authority
die,Selbstverwaltung,-en,die Selbstverwaltungen,Self-administration
die,Kommunale Selbstverwaltung,-en,die Kommunalen Selbstverwaltungen,Municipal self-government
die,Satzungsautonomie,-n,die Satzungsautonomien,Bylaw autonomy
die,K√∂rperschaft,-en,die K√∂rperschaften,Corporation
die,K√∂rperschaft des √∂ffentlichen Rechts,-en,die K√∂rperschaften des √∂ffentlichen Rechts,Public corporation
die,Anstalt,-en,die Anstalten,Institution
die,Stiftung,-en,die Stiftungen,Foundation
die,Sozialversicherung,-en,die Sozialversicherungen,Social insurance
die,Krankenkasse,-n,die Krankenkassen,Health insurance
die,Kassen√§rztliche Vereinigung,-en,die Kassen√§rztlichen Vereinigungen,Association of Statutory Health Insurance Physicians
die,Heilberufekammer,-n,die Heilberufekammern,Healthcare professional chamber
die,Landesapothekerkammer,-n,die Landesapothekerkammern,State Pharmacy Chamber
die,Bundesapothekerkammer,-n,die Bundesapothekerkammern,Federal Pharmacy Chamber
die,Berufsordnung,-en,die Berufsordnungen,Professional code
die,Hauptsatzung,-en,die Hauptsatzungen,Main statute
die,Beitragsordnung,-en,die Beitragsordnungen,Contribution regulations
die,Weiterbildungsordnung,-en,die Weiterbildungsordnungen,Further education regulations
die,Wahlordnung,-en,die Wahlordnungen,Electoral regulations
die,Delegiertenversammlung,-en,die Delegiertenversammlungen,Delegates' assembly
die,Kammerversammlung,-en,die Kammerversammlungen,Chamber assembly
die,Rechtsaufsicht,-en,die Rechtsaufsichten,Legal supervision
die,Fachaufsicht,-en,die Fachaufsichten,Technical supervision
die,Dienstaufsicht,-en,die Dienstaufsichten,Service supervision
die,Berufsgerichtsbarkeit,-en,die Berufsgerichtsbarkeiten,Professional judiciary
die,Instanz,-en,die Instanzen,Instance/Level
die,Berufung,-en,die Berufungen,Appeal
die,Revision,-en,die Revisionen,Revision/Final appeal
die,Klage,-n,die Klagen,Lawsuit/Complaint
die,Anfechtungsklage,-n,die Anfechtungsklagen,Action for annulment
die,Verpflichtungsklage,-n,die Verpflichtungsklagen,Action for performance
die,Feststellungsklage,-n,die Feststellungsklagen,Action for declaratory judgment
die,Fortsetzungsfeststellungsklage,-n,die Fortsetzungsfeststellungsklagen,Continued declaratory action
die,Leistungsklage,-n,die Leistungsklagen,Action for performance
die,Unterlassungsklage,-n,die Unterlassungsklagen,Action for injunction
die,Normenkontrolle,-n,die Normenkontrollen,Judicial review of norms
die,Verfassungsbeschwerde,-n,die Verfassungsbeschwerden,Constitutional complaint
die,Gegenvorstellung,-en,die Gegenvorstellungen,Remonstrance
die,Aufsichtsbeschwerde,-n,die Aufsichtsbeschwerden,Supervisory complaint
die,Dienstaufsichtsbeschwerde,-n,die Dienstaufsichtsbeschwerden,Service supervisory complaint
die,Frist,-en,die Fristen,Deadline
die,Monatsfrist,-en,die Monatsfristen,One-month deadline
die,Jahresfrist,-en,die Jahresfristen,One-year deadline
die,Rechtsbehelfsbelehrung,-en,die Rechtsbehelfsbelehrungen,Legal remedy instructions
die,Suspensivwirkung,-en,die Suspensivwirkungen,Suspensive effect
die,Aufschiebende Wirkung,-en,die Aufschiebenden Wirkungen,Suspensive effect
die,Kostenpflicht,-en,die Kostenpflichten,Cost obligation
die,Kostenfreiheit,-en,die Kostenfreiheiten,Cost exemption
die,Parteimaxime,-n,die Parteimaximen,Party presentation principle
die,Beibringungsgrundsatz,Beibringungsgrunds√§tze,die Beibringungsgrunds√§tze,Principle of party presentation
die,Amtsermittlung,-en,die Amtsermittlungen,Official investigation
die,Untersuchungsgrundsatz,Untersuchungsgrunds√§tze,die Untersuchungsgrunds√§tze,Inquisitorial principle
die,Beweislast,-en,die Beweislasten,Burden of proof
die,Zivilprozessordnung,-en,die Zivilprozessordnungen,Code of Civil Procedure (ZPO)
die,Strafprozessordnung,-en,die Strafprozessordnungen,Code of Criminal Procedure (StPO)
die,Verwaltungsgerichtsordnung,-en,die Verwaltungsgerichtsordnungen,Code of Administrative Court Procedure (VwGO)
die,Verwaltungsverfahrensgesetz,-e,die Verwaltungsverfahrensgesetze,Administrative Procedure Act (VwVfG)
die,Zwangsvollstreckung,-en,die Zwangsvollstreckungen,Enforcement
die,Vollstreckung,-en,die Vollstreckungen,Execution
die,Anh√∂rung,-en,die Anh√∂rungen,Hearing
die,Akteneinsicht,-en,die Akteneinsichten,Access to files
die,√Ñu√üerung,-en,die √Ñu√üerungen,Statement
die,Vernichtung,-en,die Vernichtungen,Destruction
die,Menschenw√ºrde,---,---,Human dignity
die,Handlungsfreiheit,-en,die Handlungsfreiheiten,Freedom of action
die,Berufsfreiheit,-en,die Berufsfreiheiten,Freedom of occupation
die,Versammlungsfreiheit,-en,die Versammlungsfreiheiten,Freedom of assembly
die,Vereinigungsfreiheit,-en,die Vereinigungsfreiheiten,Freedom of association
die,Koalitionsfreiheit,-en,die Koalitionsfreiheiten,Freedom of coalition
die,Meinungsfreiheit,-en,die Meinungsfreiheiten,Freedom of expression
die,Religionsfreiheit,-en,die Religionsfreiheiten,Freedom of religion
die,Gewissensfreiheit,-en,die Gewissensfreiheiten,Freedom of conscience
die,Kunstfreiheit,-en,die Kunstfreiheiten,Freedom of art
die,Wissenschaftsfreiheit,-en,die Wissenschaftsfreiheiten,Academic freedom
die,Freiz√ºgigkeit,-en,die Freiz√ºgigkeiten,Freedom of movement
die,Unverletzlichkeit,-en,die Unverletzlichkeiten,Inviolability
die,K√∂rperliche Unversehrtheit,---,---,Physical integrity
die,Gleichbehandlung,-en,die Gleichbehandlungen,Equal treatment
die,Diskriminierung,-en,die Diskriminierungen,Discrimination
die,Verh√§ltnism√§√üigkeit,-en,die Verh√§ltnism√§√üigkeiten,Proportionality
die,Erforderlichkeit,-en,die Erforderlichkeiten,Necessity
die,Geeignetheit,-en,die Geeignetheiten,Suitability
die,Zumutbarkeit,-en,die Zumutbarkeiten,Reasonableness
die,Abw√§gung,-en,die Abw√§gungen,Balancing
die,G√ºterabw√§gung,-en,die G√ºterabw√§gungen,Balancing of interests
die,Schutzpflicht,-en,die Schutzpflichten,Duty to protect
die,Drittwirkung,-en,die Drittwirkungen,Third-party effect
die,Generalklausel,-n,die Generalklauseln,General clause
die,Treu und Glauben,---,---,Good faith
die,Sittenwidrigkeit,-en,die Sittenwidrigkeiten,Immorality
die,F√ºrsorgepflicht,-en,die F√ºrsorgepflichten,Duty of care
die,Treue,---,---,Loyalty
die,Bundestreue,---,---,Federal loyalty
die,Normenhierarchie,-n,die Normenhierarchien,Hierarchy of norms
die,Verfassungsm√§√üigkeit,-en,die Verfassungsm√§√üigkeiten,Constitutionality
die,Rechtm√§√üigkeit,-en,die Rechtm√§√üigkeiten,Lawfulness
die,Zweckm√§√üigkeit,-en,die Zweckm√§√üigkeiten,Expediency
die,Legalit√§t,-en,die Legalit√§ten,Legality
die,Legitimit√§t,-en,die Legitimit√§ten,Legitimacy
die,Legitimation,-en,die Legitimationen,Legitimation
die,Homogenit√§t,-en,die Homogenit√§ten,Homogeneity
die,Ewigkeitsklausel,-n,die Ewigkeitsklauseln,Eternity clause
die,Unantastbarkeit,-en,die Unantastbarkeiten,Inviolability
die,Unver√§u√üerlichkeit,-en,die Unver√§u√üerlichkeiten,Inalienability
die,Unverwirkbarkeit,-en,die Unverwirkbarkeiten,Non-forfeitability
die,Unverf√ºgbarkeit,-en,die Unverf√ºgbarkeiten,Non-disposability
die,Vertragsfreiheit,-en,die Vertragsfreiheiten,Freedom of contract
die,Privatautonomie,-n,die Privatautonomien,Private autonomy
die,Tarifautonomie,-n,die Tarifautonomien,Collective bargaining autonomy
die,Tarifvertrag,Tarifvertr√§ge,die Tarifvertr√§ge,Collective agreement
die,Gewerkschaft,-en,die Gewerkschaften,Trade union
die,Arbeitgeberverband,Arbeitgeberverb√§nde,die Arbeitgeberverb√§nde,Employers' association
die,Konkurrenz,-en,die Konkurrenzen,Concurrence
die,Konkurrierende Gesetzgebung,-en,die Konkurrierenden Gesetzgebungen,Concurrent legislation
die,Ausschlie√üliche Gesetzgebung,-en,die Ausschlie√ülichen Gesetzgebungen,Exclusive legislation
die,Abweichungsgesetzgebung,-en,die Abweichungsgesetzgebungen,Deviating legislation
die,Erforderlichkeitsklausel,-n,die Erforderlichkeitsklauseln,Necessity clause
die,Rahmengesetzgebung,-en,die Rahmengesetzgebungen,Framework legislation
die,F√∂deralismusreform,-en,die F√∂deralismusreformen,Federalism reform
die,L√§nderzust√§ndigkeit,-en,die L√§nderzust√§ndigkeiten,State competence
die,Bundeszust√§ndigkeit,-en,die Bundeszust√§ndigkeiten,Federal competence
die,Gesetzgebungskompetenz,-en,die Gesetzgebungskompetenzen,Legislative competence
die,Gesetzgebungsbefugnis,-se,die Gesetzgebungsbefugnisse,Legislative authority
die,Erm√§chtigung,-en,die Erm√§chtigungen,Authorization
die,Erm√§chtigungsgrundlage,-n,die Erm√§chtigungsgrundlagen,Authorization basis
die,Verordnungsgeber,=,die Verordnungsgeber,Regulatory authority
die,Richtlinie,-n,die Richtlinien,Directive
die,EU-Richtlinie,-n,die EU-Richtlinien,EU directive
die,EU-Verordnung,-en,die EU-Verordnungen,EU regulation
die,Durchgriffswirkung,-en,die Durchgriffswirkungen,Direct effect
die,Umsetzung,-en,die Umsetzungen,Implementation
die,Umsetzungsfrist,-en,die Umsetzungsfristen,Implementation deadline
die,Umsetzungsverbot,-e,die Umsetzungsverbote,Implementation prohibition
die,Durchf√ºhrungsverordnung,-en,die Durchf√ºhrungsverordnungen,Implementing regulation
die,Delegierte Verordnung,-en,die Delegierten Verordnungen,Delegated regulation
die,Empfehlung,-en,die Empfehlungen,Recommendation
die,Stellungnahme,-n,die Stellungnahmen,Opinion
die,Harmonisierung,-en,die Harmonisierungen,Harmonization
die,Vertragsverletzung,-en,die Vertragsverletzungen,Infringement of treaty
die,Vertragsverletzungsverfahren,=,die Vertragsverletzungsverfahren,Infringement proceedings
die,Grundfreiheit,-en,die Grundfreiheiten,Fundamental freedom
die,Warenverkehrsfreiheit,-en,die Warenverkehrsfreiheiten,Free movement of goods
die,Personenfreiz√ºgigkeit,-en,die Personenfreiz√ºgigkeiten,Free movement of persons
die,Arbeitnehmerfreiz√ºgigkeit,-en,die Arbeitnehmerfreiz√ºgigkeiten,Free movement of workers
die,Niederlassungsfreiheit,-en,die Niederlassungsfreiheiten,Freedom of establishment
die,Dienstleistungsfreiheit,-en,die Dienstleistungsfreiheiten,Freedom to provide services
die,Kapitalverkehrsfreiheit,-en,die Kapitalverkehrsfreiheiten,Free movement of capital
die,Zahlungsverkehrsfreiheit,-en,die Zahlungsverkehrsfreiheiten,Free movement of payments
die,Zollunion,-en,die Zollunionen,Customs union
die,Einfuhrbeschr√§nkung,-en,die Einfuhrbeschr√§nkungen,Import restriction
die,Ausfuhrbeschr√§nkung,-en,die Ausfuhrbeschr√§nkungen,Export restriction
die,Mengenbeschr√§nkung,-en,die Mengenbeschr√§nkungen,Quantitative restriction
die,Ma√ünahme gleicher Wirkung,-n,die Ma√ünahmen gleicher Wirkung,Measure having equivalent effect
die,Lesungen,nur P,die Lesungen,Readings
die,Schlussabstimmung,-en,die Schlussabstimmungen,Final vote
die,Zustimmung,-en,die Zustimmungen,Consent/Approval
die,Mehrheit,-en,die Mehrheiten,Majority
die,Einfache Mehrheit,-en,die Einfachen Mehrheiten,Simple majority
die,Absolute Mehrheit,-en,die Absoluten Mehrheiten,Absolute majority
die,Zweidrittelmehrheit,-en,die Zweidrittelmenheiten,Two-thirds majority
die,Kanzlermehrheit,-en,die Kanzlermehrheiten,Chancellor majority
die,Vermittlungsausschuss,Vermittlungsaussch√ºsse,die Vermittlungsaussch√ºsse,Mediation committee
die,Zustimmungsgesetz,-e,die Zustimmungsgesetze,Consent law
die,Einspruchsgesetz,-e,die Einspruchsgesetze,Objection law
die,Ausfertigung,-en,die Ausfertigungen,Authentication
die,Gegenzeichnung,-en,die Gegenzeichnungen,Countersignature
die,Verk√ºndung,-en,die Verk√ºndungen,Promulgation
die,Inkrafttretung,-en,die Inkrafttretungen,Entry into force
die,Wesentlichkeitstheorie,-n,die Wesentlichkeitstheorien,Essentiality theory
die,Bestimmtheit,-en,die Bestimmtheiten,Definiteness
die,Bestimmtheitsgrundsatz,Bestimmtheitsgrunds√§tze,die Bestimmtheitsgrunds√§tze,Principle of legal certainty

`.trim();

// ============================================
// EDIT SECTION 3: CSV DATA - ADJECTIVES
// ============================================
const adjectivesCSV = `
-f√∂rmlich,formal,-formlos,informal
-verbindlich,binding,-unverbindlich,non-binding
-rechtm√§√üig,lawful,-rechtswidrig,unlawful
-zul√§ssig,permissible,-unzul√§ssig,inadmissible
-zust√§ndig,competent,-unzust√§ndig,incompetent
-wirksam,effective,-unwirksam,ineffective
-rechtskr√§ftig,legally-binding,-anfechtbar,contestable
-√∂ffentlich,public,-privat,private
-staatlich,governmental,-nichtstaatlich,non-governmental
-origin√§r,original,-abgeleitet,derived
-ausschlie√ülich,exclusive,-konkurrierend,concurrent
-sachlich,substantive,-formell,procedural
-materiell,material,-verfahrensrechtlich,procedural
-√ºbergeordnet,superior,-nachgeordnet,subordinate
-oberst,supreme,-unterst,lowest
-wesentlich,essential,-unwesentlich,non-essential
-gebunden,bound,-frei,free
-unmittelbar,direct,-mittelbar,indirect
-generell,general,-abstrakt,abstract
-verfassungsgem√§√ü,constitutional,-verfassungswidrig,unconstitutional

`.trim();

// ============================================
// EDIT SECTION 4: CSV DATA - VERBS
// ============================================
const verbsCSV = `
*erlassen,enact,*aufheben,repeal
*verk√ºnden,promulgate,*ver√∂ffentlichen,publish
*beschlie√üen,resolve,*ablehnen,reject
*erm√§chtigen,authorize,*entziehen,withdraw
*verpflichten,obligate,*berechtigen,entitle
*anordnen,order,*verbieten,prohibit
*vollziehen,execute,*durchsetzen,enforce
*√ºberwachen,supervise,*kontrollieren,control
*genehmigen,approve,*verweigern,refuse
*widerrufen,revoke,*zur√ºcknehmen,withdraw
*anfechten,challenge,*verteidigen,defend
*klagen,sue,*beklagen,complain
*entscheiden,decide,*urteilen,judge
*verhandeln,negotiate,*schlichten,mediate
*aussagen,testify,*beweisen,prove
*anh√∂ren,hear,*vernehmen,question
*ratifizieren,ratify,*unterzeichnen,sign
*delegieren,delegate,*√ºbertragen,transfer
*regeln,regulate,*normieren,standardize
*interpretieren,interpret,*auslegen,construe
+gelten,apply,+bestehen,exist
+versto√üen,violate,+einhalten,comply
+unterliegen,be-subject-to,+obliegen,be-incumbent-upon
+eingreifen,intervene,+unterlassen,omit
+ergreifen,take-action,+erhalten,receive
+eingehen,enter-into,+schlie√üen,conclude
+widersprechen,contradict,+entsprechen,correspond
+vorliegen,be-present,+fehlen,be-absent
+ergehen,be-issued,+zustehen,be-entitled
+binden,bind,+verpflichten,commit

`.trim();

// ============================================
// EDIT SECTION 5: CSV DATA - EXPRESSIONS
// ============================================
const expressionsCSV = `
Welche Beh√∂rde ist zust√§ndig?,Which authority is competent?
Das Gesetz tritt in Kraft.,The law enters into force.
Der Bescheid ist rechtskr√§ftig.,The decision is legally binding.
Es besteht Rechtsanspruch.,There is a legal entitlement.
Die Frist l√§uft ab.,The deadline expires.
Das verst√∂√üt gegen Grundrechte.,That violates fundamental rights.
Es gilt der Grundsatz der Verh√§ltnism√§√üigkeit.,The principle of proportionality applies.
Der Antrag wurde genehmigt.,The application was approved.
Hiergegen kann Widerspruch eingelegt werden.,An objection can be filed against this.
Die Approbation wurde erteilt.,The license was granted.
Es liegt im Ermessen der Beh√∂rde.,It is at the discretion of the authority.
Das Verfahren ist kostenpflichtig.,The procedure involves costs.
Der Verwaltungsakt ist nichtig.,The administrative act is void.
Es besteht aufschiebende Wirkung.,There is suspensive effect.
Die Norm ist verfassungswidrig.,The norm is unconstitutional.
Bundesrecht bricht Landesrecht.,Federal law overrides state law.
Das unterliegt der Rechtsaufsicht.,That is subject to legal supervision.
Es gilt das Legalit√§tsprinzip.,The legality principle applies.
Die Entscheidung ist bindend.,The decision is binding.
Hierf√ºr ist eine Erm√§chtigungsgrundlage erforderlich.,An authorization basis is required for this.

`.trim();

// ============================================
// EDIT SECTION 6: CSV DATA - CONVERSATIONS
// ============================================
const conversationsCSV = `
Administrative Procedure|A,Guten Tag. Ich m√∂chte eine Betriebserlaubnis beantragen.,Good day. I would like to apply for an operating license.
Administrative Procedure|B,Welche Unterlagen haben Sie mitgebracht?,What documents have you brought?
Administrative Procedure|A,Hier ist meine Approbation und der Nachweis der pers√∂nlichen Voraussetzungen.,Here is my license and proof of personal requirements.
Administrative Procedure|B,Gut. Sind die sachlichen Voraussetzungen erf√ºllt?,Good. Are the substantive requirements met?
Administrative Procedure|A,Ja alle Anforderungen der ApBetrO sind erf√ºllt.,Yes all requirements of the ApBetrO are met.
Administrative Procedure|B,Dann k√∂nnen wir den Antrag bearbeiten. Die Bearbeitungszeit betr√§gt etwa vier Wochen.,Then we can process the application. Processing time is about four weeks.
Administrative Procedure|A,Gibt es ein Widerspruchsrecht?,Is there a right to object?
Administrative Procedure|B,Ja. Sie haben bei einem ablehnenden Bescheid einen Monat Zeit Widerspruch einzulegen.,Yes. You have one month to file an objection in case of a negative decision.
Legal Consultation|A,Ich habe einen Beitragsbescheid der Kammer erhalten. Ist der rechtm√§√üig?,I received a membership fee notice from the chamber. Is it lawful?
Legal Consultation|B,Die Kammer hat die Befugnis Beitr√§ge zu erheben.,The chamber has the authority to levy fees.
Legal Consultation|A,Kann ich dagegen vorgehen?,Can I take action against it?
Legal Consultation|B,Ja. Sie k√∂nnen binnen eines Monats Widerspruch einlegen.,Yes. You can file an objection within one month.
Legal Consultation|A,Was passiert wenn der Widerspruch erfolglos bleibt?,What happens if the objection is unsuccessful?
Legal Consultation|B,Dann k√∂nnen Sie vor dem Verwaltungsgericht klagen.,Then you can sue in administrative court.
Legal Consultation|A,Hat das aufschiebende Wirkung?,Does that have suspensive effect?
Legal Consultation|B,Ja in der Regel schon.,Yes usually it does.
Court Hearing|A,Hiermit er√∂ffne ich die m√ºndliche Verhandlung.,I hereby open the oral hearing.
Court Hearing|B,Die Kl√§gerin beantragt die Aufhebung des Bescheids.,The plaintiff requests the annulment of the decision.
Court Hearing|A,Auf welcher Rechtsgrundlage beruht der Bescheid?,On what legal basis does the decision rest?
Court Hearing|B,Die Beklagte beruft sich auf Paragraph 4 des Apothekengesetzes.,The defendant refers to Section 4 of the Pharmacy Act.
Court Hearing|A,Sind die Voraussetzungen erf√ºllt?,Are the requirements met?
Court Hearing|B,Ja alle sachlichen und pers√∂nlichen Voraussetzungen liegen vor.,Yes all substantive and personal requirements are present.
Court Hearing|A,Das Gericht wird das Verfahren vertagen.,The court will adjourn the proceedings.
Court Hearing|B,Wann wird das Urteil verk√ºndet?,When will the judgment be announced?

`.trim();

// ============================================
// EDIT SECTION 7: CSV DATA - Q&A
// ============================================
const qaCSV = `
Was ist eine Rechtsverordnung?,Eine Rechtsverordnung ist eine von der Verwaltung erlassene Norm. Sie ben√∂tigt eine Erm√§chtigungsgrundlage. (A regulation is a norm issued by the administration. It requires an authorization basis.)
Was bedeutet Gewaltenteilung?,Gewaltenteilung bedeutet die Aufteilung der Staatsgewalt in Legislative Judikative und Exekutive. (Separation of powers means the division of state power into legislative judicial and executive branches.)
Was sind Grundrechte?,Grundrechte sind Abwehrrechte des B√ºrgers gegen den Staat. Sie stehen im Grundgesetz. (Fundamental rights are defensive rights of citizens against the state. They are in the Basic Law.)
Welche Gesetze gibt es im materiellen Sinn?,Im materiellen Sinn gibt es formelle Gesetze Rechtsverordnungen und Satzungen. (In the material sense there are formal laws regulations and statutes.)
Was ist ein Verwaltungsakt?,Ein Verwaltungsakt ist eine hoheitliche Ma√ünahme einer Beh√∂rde zur Regelung eines Einzelfalls. (An administrative act is a sovereign measure by an authority to regulate an individual case.)
Wer kann Gesetze initiieren?,Gesetze k√∂nnen von der Bundesregierung vom Bundestag und vom Bundesrat initiiert werden. (Laws can be initiated by the federal government the Bundestag and the Bundesrat.)
Was bedeutet konkurrierende Gesetzgebung?,Bei konkurrierender Gesetzgebung d√ºrfen L√§nder nur t√§tig werden wenn der Bund nicht t√§tig geworden ist. (In concurrent legislation states may only act if the federation has not acted.)
Was ist der Unterschied zwischen Zivilrecht und √ñffentlichem Recht?,Zivilrecht regelt Beziehungen zwischen Privatpersonen. √ñffentliches Recht regelt das Verh√§ltnis B√ºrger-Staat. (Civil law regulates relationships between private persons. Public law regulates the citizen-state relationship.)
Was ist eine Apothekerkammer?,Eine Apothekerkammer ist eine K√∂rperschaft des √∂ffentlichen Rechts mit Pflichtmitgliedschaft. (A pharmacists' chamber is a public law corporation with mandatory membership.)
Welche Aufgaben hat die Bezirksregierung im Apothekenrecht?,Die Bezirksregierung erteilt Approbationen und kontrolliert Krankenhausapotheken. (The district government grants licenses and controls hospital pharmacies.)
Was ist das Bundesgesundheitsministerium?,Das Bundesgesundheitsministerium ist die oberste Gesundheitsbeh√∂rde des Bundes. (The Federal Ministry of Health is the supreme health authority of the federation.)
Welche Beh√∂rde erteilt die Apothekenbetriebserlaubnis?,Die Kreisverwaltungsbeh√∂rde erteilt die Apothekenbetriebserlaubnis. (The district administrative authority grants the pharmacy operating license.)
Was macht das BfArM?,Das BfArM f√ºhrt das Arzneimittelgesetz durch und l√§sst Arzneimittel zu. (The BfArM implements the Medicines Act and approves medicines.)
Was bedeutet Bundesrecht bricht Landesrecht?,Bundesrecht bricht Landesrecht bedeutet dass Bundesrecht Vorrang vor Landesrecht hat. (Federal law breaks state law means that federal law takes precedence over state law.)
Welche Grundfreiheiten gibt es in der EU?,Es gibt freien Warenverkehr Freiz√ºgigkeit Dienstleistungsfreiheit und freien Kapitalverkehr. (There is free movement of goods persons services and capital.)

`.trim();

// ============================================
// EDIT SECTION 8: CSV DATA - SENTENCES
// ============================================
const sentencesCSV = `
Das Grundgesetz ist die Verfassung der Bundesrepublik Deutschland.,The Basic Law is the constitution of the Federal Republic of Germany.
Grundrechte sind unver√§u√üerlich und unantastbar.,Fundamental rights are inalienable and inviolable.
Der Bundestag beschlie√üt Gesetze mit einfacher Mehrheit.,The Bundestag passes laws with a simple majority.
Die Verwaltung vollzieht die Gesetze.,The administration executes the laws.
Gerichte sprechen Recht unabh√§ngig und nur dem Gesetz unterworfen.,Courts administer justice independently and subject only to the law.
Eine Rechtsverordnung ben√∂tigt eine Erm√§chtigungsgrundlage.,A regulation requires an authorization basis.
Der Verwaltungsakt muss schriftlich begr√ºndet werden.,The administrative act must be justified in writing.
Gegen einen Bescheid kann Widerspruch eingelegt werden.,An objection can be filed against a decision.
Die Widerspruchsfrist betr√§gt einen Monat.,The objection period is one month.
Im Verwaltungsprozess gilt der Amtsermittlungsgrundsatz.,The inquisitorial principle applies in administrative proceedings.
Die Apothekerkammer ist eine K√∂rperschaft des √∂ffentlichen Rechts.,The pharmacists' chamber is a public law corporation.
Die Mitgliedschaft in der Kammer ist gesetzlich vorgeschrieben.,Membership in the chamber is legally required.
Die Kammer unterliegt der Rechtsaufsicht des Ministeriums.,The chamber is subject to the legal supervision of the ministry.
Bundesrecht hat Vorrang vor Landesrecht.,Federal law takes precedence over state law.
Die Berufsordnung regelt die Berufspflichten.,The professional code regulates professional duties.
Das Apothekengesetz enth√§lt eine Erm√§chtigungsgrundlage f√ºr die ApBetrO.,The Pharmacy Act contains an authorization basis for the ApBetrO.
Die Bezirksregierung ist die h√∂here Landesgesundheitsbeh√∂rde.,The district government is the higher state health authority.
Das BfArM l√§sst Fertigarzneimittel zu.,The BfArM approves finished medicinal products.
Europarecht steht √ºber einfachem Bundesrecht.,European law stands above simple federal law.
Die vier Grundfreiheiten der EU sind verbindlich.,The four fundamental freedoms of the EU are binding.

`.trim();

        // ============================================
        // SPEECH SYNTHESIS - FIXED FOR PLURAL ISSUE
        // ============================================
        let germanVoice = null;
        let currentUtterance = null;
        let isSpeaking = false;
        let isPlayingSequence = false; // NEW: Track if playing a sequence

        function loadVoices() {
            const voices = window.speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            voiceSelect.innerHTML = '';

            const germanVoices = voices.filter(voice => voice.lang.startsWith('de'));

            if (germanVoices.length === 0) {
                voiceSelect.innerHTML = '<option value="">No German voice found - Using default</option>';
                germanVoice = voices.find(v => v.lang.includes('en')) || voices[0];
            } else {
                germanVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                    if (index === 0) germanVoice = voice;
                });
            }
            console.log('‚úÖ Voice loaded:', germanVoice ? germanVoice.name : 'None');
        }

        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        loadVoices();
        setTimeout(loadVoices, 100);
        setTimeout(loadVoices, 500);

        document.getElementById('voiceSelect').addEventListener('change', function(e) {
            stopAllSpeech();
            const voices = window.speechSynthesis.getVoices();
            const germanVoices = voices.filter(voice => voice.lang.startsWith('de'));
            germanVoice = germanVoices[e.target.value] || voices[0];
            console.log('üîÑ Voice changed to:', germanVoice ? germanVoice.name : 'default');
        });

        document.getElementById('speedControl').addEventListener('input', function(e) {
            document.getElementById('speedValue').textContent = e.target.value + 'x';
        });

        document.getElementById('pitchControl').addEventListener('input', function(e) {
            document.getElementById('pitchValue').textContent = e.target.value;
        });

        // IMPROVED: Simple speak function without debouncing for sequences
        function speak(text, callback) {
            if (!text || text.trim() === '') {
                console.warn('‚ö†Ô∏è Empty text, skipping');
                if (callback) callback();
                return;
            }

            text = text.replace('üîä', '').trim();

            // Only stop if NOT playing a sequence
            if (!isPlayingSequence) {
                stopAllSpeech();
            }

            setTimeout(() => {
                speakNow(text, callback);
            }, 100);
        }

        function stopAllSpeech() {
            isPlayingSequence = false;
            window.speechSynthesis.cancel();
            isSpeaking = false;
            hideAudioStatus();
            console.log('‚èπÔ∏è All speech stopped');
        }

        function speakNow(text, callback) {
            if (!('speechSynthesis' in window)) {
                alert('‚ö†Ô∏è Text-to-speech not supported.\n\nUse Chrome, Firefox, Edge, or Safari.');
                if (callback) callback();
                return;
            }

            showAudioStatus(text);
            console.log('üó£Ô∏è Speaking:', text);

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'de-DE';
            if (germanVoice) utterance.voice = germanVoice;
            utterance.rate = parseFloat(document.getElementById('speedControl').value);
            utterance.pitch = parseFloat(document.getElementById('pitchControl').value);
            utterance.volume = 1.0;

            let hasEnded = false;

            utterance.onstart = function() {
                isSpeaking = true;
                console.log('‚ñ∂Ô∏è Started:', text.substring(0, 40));
            };

            utterance.onend = function() {
                if (hasEnded) return;
                hasEnded = true;
                isSpeaking = false;
                hideAudioStatus();
                console.log('‚úÖ Ended:', text.substring(0, 40));
                if (callback) setTimeout(callback, 100);
            };

            utterance.onerror = function(event) {
                if (hasEnded) return;
                hasEnded = true;
                isSpeaking = false;
                hideAudioStatus();
                
                if (event.error !== 'interrupted' && event.error !== 'canceled') {
                    console.error('‚ùå Speech error:', event.error);
                } else {
                    console.log('‚ÑπÔ∏è Speech ' + event.error);
                }
                if (callback) callback();
            };

            currentUtterance = utterance;

            try {
                window.speechSynthesis.speak(utterance);
            } catch (error) {
                console.error('‚ùå Speak failed:', error);
                isSpeaking = false;
                hideAudioStatus();
                if (callback) callback();
            }
        }

        function showAudioStatus(text) {
            const status = document.getElementById('audioStatus');
            const statusText = document.getElementById('audioStatusText');
            const displayText = text.length > 40 ? text.substring(0, 40) + '...' : text;
            statusText.textContent = `üîä ${displayText}`;
            status.classList.add('show');
        }

        function hideAudioStatus() {
            setTimeout(() => {
                document.getElementById('audioStatus').classList.remove('show');
            }, 300);
        }

        // ============================================
        // SPECIFIC SPEAK FUNCTIONS
        // ============================================
        function speakAdjective(word1, word2) {
            if (event) event.stopPropagation();
            console.log('üî§ Adjective pair:', word1, word2);
            isPlayingSequence = true;
            speak(word1, function() {
                setTimeout(() => {
                    speak(word2, function() {
                        isPlayingSequence = false;
                    });
                }, 800);
            });
        }

        function speakVerb(verb1, verb2) {
            if (event) event.stopPropagation();
            const cleanVerb1 = verb1.replace(/[\*\+]/g, '').trim();
            const cleanVerb2 = verb2.replace(/[\*\+]/g, '').trim();
            console.log('‚ö° Verb pair:', cleanVerb1, cleanVerb2);
            isPlayingSequence = true;
            speak(cleanVerb1, function() {
                setTimeout(() => {
                    speak(cleanVerb2, function() {
                        isPlayingSequence = false;
                    });
                }, 800);
            });
        }

        function speakQA(question, answer) {
            if (event) event.stopPropagation();
            console.log('‚ùì Q&A:', question, answer);
            isPlayingSequence = true;
            speak(question, function() {
                setTimeout(() => {
                    speak(answer, function() {
                        isPlayingSequence = false;
                    });
                }, 1200);
            });
        }

        // NEW: Noun function with plural
        function speakNounRow(article, singular, pluralFull) {
            if (event) event.stopPropagation();
            speakNounWithPlural(article, singular, pluralFull);
        }

        function speakNounWithPlural(article, singular, pluralFull) {
            console.log('üìö Noun with plural:', article, singular, '‚Üí', pluralFull);
            isPlayingSequence = true;
            
            speak(`${article} ${singular}`, function() {
                if (pluralFull !== '---' && pluralFull !== 'kein Plural') {
                    setTimeout(() => {
                        speak(pluralFull, function() {
                            isPlayingSequence = false;
                        });
                    }, 300);
                } else {
                    isPlayingSequence = false;
                }
            });
        }

        // ============================================
        // PLAY ALL IN SECTION
        // ============================================
        let playAllActive = false;
        let playAllIndex = 0;
        let playAllTexts = [];

        function playAllInSection() {
            const playBtn = document.querySelector('.play-all-btn');

            if (playAllActive) {
                playAllActive = false;
                stopAllSpeech();
                playBtn.textContent = '‚ñ∂ Play All in Section';
                console.log('‚èπÔ∏è Play all stopped');
                return;
            }

            const activeTab = document.querySelector('.tab-content.active');
            const tabId = activeTab.id;
            playAllTexts = [];

            switch(tabId) {
                case 'nouns':
                    const nounsData = parseCSV(nounsCSV);
                    nounsData.forEach(row => {
                        const [article, german, pluralNotation, pluralFull, english] = row;
                        playAllTexts.push(`${article} ${german}`);
                        if (pluralFull !== '---' && pluralFull !== 'kein Plural') {
                            playAllTexts.push(pluralFull);
                        }
                    });
                    break;

                case 'adjectives':
                    const adjCards = activeTab.querySelectorAll('.word-pair');
                    adjCards.forEach(card => {
                        const germans = card.querySelectorAll('.german');
                        germans.forEach(g => playAllTexts.push(g.textContent.trim()));
                    });
                    break;

                case 'verbs':
                    const verbCards = activeTab.querySelectorAll('.word-pair');
                    verbCards.forEach(card => {
                        const germans = card.querySelectorAll('.german');
                        germans.forEach(g => {
                            const cleanText = g.textContent.replace(/[\*\+]/g, '').trim();
                            playAllTexts.push(cleanText);
                        });
                    });
                    break;

                case 'expressions':
                    const exprs = activeTab.querySelectorAll('.expression-german');
                    exprs.forEach(expr => playAllTexts.push(expr.textContent.replace('üîä', '').trim()));
                    break;

                case 'conversations':
                    const messages = activeTab.querySelectorAll('.message-german');
                    messages.forEach(msg => playAllTexts.push(msg.textContent.replace('üîä', '').trim()));
                    break;

                case 'qa':
                    const questions = activeTab.querySelectorAll('.question');
                    questions.forEach(q => playAllTexts.push(q.textContent.replace('üîä', '').trim()));
                    break;

                case 'sentences':
                    const sentences = activeTab.querySelectorAll('.sentence-german');
                    sentences.forEach(s => playAllTexts.push(s.textContent.replace('üîä', '').trim()));
                    break;
            }

            if (playAllTexts.length === 0) {
                alert('No items to play in this section.');
                return;
            }

            console.log('üìö Playing', playAllTexts.length, 'items');
            playAllActive = true;
            isPlayingSequence = true;
            playAllIndex = 0;
            playBtn.textContent = '‚èπÔ∏è Stop Playing';

            playNextInSequence(playBtn);
        }

        function playNextInSequence(playBtn) {
            if (!playAllActive || playAllIndex >= playAllTexts.length) {
                playAllActive = false;
                isPlayingSequence = false;
                playBtn.textContent = '‚ñ∂ Play All in Section';
                hideAudioStatus();

                if (playAllIndex >= playAllTexts.length) {
                    setTimeout(() => {
                        alert('‚úÖ Finished playing all ' + playAllTexts.length + ' items!');
                    }, 500);
                }
                return;
            }

            const progress = Math.round(((playAllIndex + 1) / playAllTexts.length) * 100);
            console.log(`üîä Progress: ${playAllIndex + 1}/${playAllTexts.length} (${progress}%)`);

            const currentText = playAllTexts[playAllIndex];
            playAllIndex++;

            speak(currentText, function() {
                setTimeout(() => {
                    playNextInSequence(playBtn);
                }, 1000);
            });
        }

        // ============================================
        // TAB SWITCHING
        // ============================================
        function showTab(tabName) {
            stopAllSpeech();
            playAllActive = false;

            const playBtn = document.querySelector('.play-all-btn');
            if (playBtn) playBtn.textContent = '‚ñ∂ Play All in Section';

            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            if (event && event.target) event.target.classList.add('active');

            console.log('üìë Tab:', tabName);
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // ============================================
        // CSV PARSERS AND RENDERERS
        // ============================================
        function parseCSV(csv) {
            return csv.split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0)
                .map(line => line.split(',').map(cell => cell.trim()));
        }

                function renderNouns() {
            const data = parseCSV(nounsCSV);
            const grouped = { das: [], der: [], die: [] };

            data.forEach(row => {
                const [article, german, pluralNotation, pluralFull, english] = row;
                grouped[article].push({ article, german, pluralNotation, pluralFull, english });
            });

            const articles = [
                { key: 'der', label: 'Maskulinum (der)', color: '#2196F3' },
                { key: 'das', label: 'Neutrum (das)', color: '#4CAF50' },
                { key: 'die', label: 'Femininum (die)', color: '#F44336' }
            ];

            // ============================================
            // DESKTOP TABLE VIEW
            // ============================================
            let tableHtml = '';
            articles.forEach(({ key, label, color }) => {
                if (grouped[key].length > 0) {
                    tableHtml += `<h3 style="color: ${color}; margin-top: 40px;">${label}</h3>`;
                    tableHtml += `<table class="vocab-table ${key}">
                        <thead>
                            <tr>
                                <th>Article</th>
                                <th>German</th>
                                <th>Plural</th>
                                <th>English</th>
                                <th>Audio</th>
                            </tr>
                        </thead>
                        <tbody>`;

                    grouped[key].forEach(word => {
                        const escapedSingular = word.german.replace(/'/g, "\\'");
                        const escapedPlural = word.pluralFull.replace(/'/g, "\\'");

                        tableHtml += `<tr onclick="speakNounRow('${word.article}', '${escapedSingular}', '${escapedPlural}')">
                            <td class="article ${word.article}">${word.article}</td>
                            <td class="german-word">${word.german}</td>
                            <td class="plural">${word.pluralNotation}</td>
                            <td class="english-word">${word.english}</td>
                            <td><button class="audio-btn" onclick="event.stopPropagation(); speakNounWithPlural('${word.article}', '${escapedSingular}', '${escapedPlural}')">üîä</button></td>
                        </tr>`;
                    });

                    tableHtml += `</tbody></table>`;
                }
            });

            // ============================================
            // MOBILE CARD VIEW
            // ============================================
            let mobileHtml = '<div class="mobile-noun-cards">';

            articles.forEach(({ key, label, color }) => {
                if (grouped[key].length > 0) {
                    mobileHtml += `<h3 style="color: ${color}; margin-top: 30px; margin-bottom: 15px;">${label}</h3>`;

                    grouped[key].forEach(word => {
                        const escapedSingular = word.german.replace(/'/g, "\\'");
                        const escapedPlural = word.pluralFull.replace(/'/g, "\\'");

                        mobileHtml += `
                        <div class="mobile-noun-card ${word.article}" onclick="speakNounRow('${word.article}', '${escapedSingular}', '${escapedPlural}')">
                            <div class="mobile-noun-header">
                                <div class="mobile-article-word ${word.article}">
                                    <span>${word.article}</span>
                                    <span>${word.german}</span>
                                </div>
                                <button class="mobile-audio-btn" onclick="event.stopPropagation(); speakNounWithPlural('${word.article}', '${escapedSingular}', '${escapedPlural}')">üîä</button>
                            </div>
                            <div class="mobile-noun-details">
                                <span class="mobile-label">Plural:</span>
                                <span class="mobile-plural">${word.pluralNotation}</span>
                                <span class="mobile-label">English:</span>
                                <span class="mobile-english">${word.english}</span>
                            </div>
                        </div>`;
                    });
                }
            });

            mobileHtml += '</div>';

            // Combine both views
            document.getElementById('nounsContainer').innerHTML = tableHtml + mobileHtml;
        }

        function renderAdjectives() {
            const data = parseCSV(adjectivesCSV);
            let html = '';

            data.forEach(row => {
                const [word1, english1, word2, english2] = row;
                html += `<div class="word-pair" onclick="speakAdjective('${word1}', '${word2}')">
                    <div class="card-audio-btn">üîä</div>
                    <div class="german">${word1}</div>
                    <div class="english">${english1}</div>
                    <div class="opposite-arrow">‚ü∑</div>
                    <div class="german">${word2}</div>
                    <div class="english">${english2}</div>
                </div>`;
            });

            document.getElementById('adjectivesContainer').innerHTML = html;
        }

        function renderVerbs() {
            const data = parseCSV(verbsCSV);
            let html = '';

            data.forEach(row => {
                const [type, verb1, english1, verb2, english2] = row;
                const prefix = type === 'weak' ? '*' : '+';
                const gradient = type === 'weak' 
                    ? 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
                    : 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)';
                
                html += `<div class="word-pair" style="background: ${gradient};" onclick="speakVerb('${verb1}', '${verb2}')">
                    <div class="card-audio-btn">üîä</div>
                    <div class="german">${prefix}${verb1}</div>
                    <div class="english">${english1}</div>
                    <div class="opposite-arrow">‚ü∑</div>
                    <div class="german">${prefix}${verb2}</div>
                    <div class="english">${english2}</div>
                </div>`;
            });

            document.getElementById('verbsContainer').innerHTML = html;
        }

        function renderExpressions() {
            const data = parseCSV(expressionsCSV);
            let html = '';

            data.forEach(row => {
                const [german, english] = row;
                const escapedGerman = german.replace(/'/g, "\\'");
                html += `<li class="expression-item" onclick="speak('${escapedGerman}')">
                    <div class="expression-german">${german} üîä</div>
                    <div class="expression-english">${english}</div>
                </li>`;
            });

            document.getElementById('expressionsContainer').innerHTML = html;
        }

        function renderConversations() {
            const data = parseCSV(conversationsCSV);
            const conversations = {};

            data.forEach(row => {
                const [titleSpeaker, german, english] = row;
                const [title, speaker] = titleSpeaker.split('|');
                
                if (!conversations[title]) {
                    conversations[title] = [];
                }
                conversations[title].push({ speaker, german, english });
            });

            let html = '';
            Object.keys(conversations).forEach((title, index) => {
                html += `<h3 style="color: #667eea; margin-top: ${index > 0 ? '40px' : '30px'};">Conversation ${index + 1}: ${title}</h3>`;
                html += `<div class="conversation">`;
                
                conversations[title].forEach(msg => {
                    const messageClass = msg.speaker === 'A' ? 'message-a' : 'message-b';
                    const escapedGerman = msg.german.replace(/'/g, "\\'");
                    html += `<div class="message ${messageClass}" onclick="speak('${escapedGerman}')">
                        <div class="message-german">${msg.german} üîä</div>
                        <div class="message-english">${msg.english}</div>
                    </div>`;
                });
                
                html += `</div>`;
            });

            document.getElementById('conversationsContainer').innerHTML = html;
        }

        function renderQA() {
            const data = parseCSV(qaCSV);
            let html = '';

            data.forEach(row => {
                const [question, answer] = row;
                const escapedQ = question.replace(/'/g, "\\'");
                const escapedA = answer.replace(/'/g, "\\'");
                html += `<div class="qa-card" onclick="speakQA('${escapedQ}', '${escapedA}')">
                    <div class="question">${question} üîä</div>
                    <div class="answer">${answer}</div>
                </div>`;
            });

            document.getElementById('qaContainer').innerHTML = html;
        }

        function renderSentences() {
            const data = parseCSV(sentencesCSV);
            let html = '';

            data.forEach(row => {
                const [german, english] = row;
                const escapedGerman = german.replace(/'/g, "\\'");
                html += `<div class="sentence-card" onclick="speak('${escapedGerman}')">
                    <div class="sentence-german">${german} üîä</div>
                    <div class="sentence-english">${english}</div>
                </div>`;
            });

            document.getElementById('sentencesContainer').innerHTML = html;
        }

        // ============================================
        // KEYBOARD SHORTCUTS
        // ============================================
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;

            if (e.key === 's' || e.key === 'S' || e.key === 'Escape') {
                stopAllSpeech();
                playAllActive = false;
                const playBtn = document.querySelector('.play-all-btn');
                if (playBtn) playBtn.textContent = '‚ñ∂ Play All in Section';
                console.log('‚èπÔ∏è Stopped by keyboard');
            }

            if (e.key === 'p' || e.key === 'P') {
                playAllInSection();
            }

            const tabMap = {
                '1': 'nouns',
                '2': 'adjectives',
                '3': 'verbs',
                '4': 'expressions',
                '5': 'conversations',
                '6': 'qa',
                '7': 'sentences'
            };

            if (tabMap[e.key]) {
                const buttons = document.querySelectorAll('.tab-button');
                buttons.forEach((btn, idx) => {
                    if (Object.values(tabMap)[idx] === tabMap[e.key]) {
                        btn.click();
                    }
                });
            }
        });

        // ============================================
        // CLEANUP
        // ============================================
        window.addEventListener('beforeunload', function() {
            stopAllSpeech();
        });

        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopAllSpeech();
                playAllActive = false;
            }
        });

        // ============================================
        // INITIALIZE
        // ============================================
        window.addEventListener('load', function() {
            console.log('üá©üá™ German Vocabulary Loaded!');
            console.log('üí° Shortcuts: S/Esc=Stop | P=Play All | 1-7=Tabs');

            renderNouns();
            renderAdjectives();
            renderVerbs();
            renderExpressions();
            renderConversations();
            renderQA();
            renderSentences();

            loadVoices();
            setTimeout(loadVoices, 100);
            setTimeout(loadVoices, 500);
            setTimeout(loadVoices, 1000);

            if (!('speechSynthesis' in window)) {
                alert('‚ö†Ô∏è Text-to-speech not supported.\n\nPlease use Chrome, Firefox, Edge, or Safari.');
            }
        });
    </script>
</body>
</html>