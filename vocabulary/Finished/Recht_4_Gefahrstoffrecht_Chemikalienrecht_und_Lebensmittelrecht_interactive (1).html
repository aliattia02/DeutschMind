<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Vocabulary - Interactive Audio Learning - Recht 4 Gefahrstoffrecht, Chemikalienrecht und Lebensmittelrecht</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(90deg, #000000, #DD0000, #FFCE00);
            color: white;
            text-align: center;
            padding: 40px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .audio-controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .audio-controls h3 {
            color: #667eea;
            margin-bottom: 10px;
            width: 100%;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: 600;
            color: #333;
        }

        .control-group select,
        .control-group input {
            padding: 8px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
        }

        .play-all-btn {
            background: linear-gradient(135deg, #DD0000, #FFCE00);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .play-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .tab-button {
            background: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tab-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background: #DD0000;
            color: white;
        }

        .tab-button.active {
            background: #DD0000;
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #DD0000;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #FFCE00;
            padding-bottom: 10px;
        }

        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .vocab-table th {
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }

        /* COLOR-CODED HEADERS FOR EACH ARTICLE */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der th {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .vocab-table.das th {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }

        .vocab-table.die th {
            background: linear-gradient(135deg, #F44336, #D32F2F);
        }

        .vocab-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        .vocab-table tr {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* PERMANENT COLOR-CODED ROW BACKGROUNDS */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der tbody tr {
            background: #E3F2FD;
        }

        .vocab-table.das tbody tr {
            background: #E8F5E9;
        }

        .vocab-table.die tbody tr {
            background: #FFEBEE;
        }

        /* DARKER ON HOVER */
        .vocab-table.der tbody tr:hover {
            background: #BBDEFB;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
        }

        .vocab-table.das tbody tr:hover {
            background: #C8E6C9;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
        }

        .vocab-table.die tbody tr:hover {
            background: #FFCDD2;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.3);
        }

        .article {
            font-weight: bold;
            font-size: 1.1em;
        }

        /* COLOR-CODED ARTICLES AND WORDS */
        /* der = BLUE, das = GREEN, die = RED */
        .vocab-table.der .article,
        .vocab-table.der .german-word {
            color: #1565C0;
            font-weight: 700;
        }

        .vocab-table.das .article,
        .vocab-table.das .german-word {
            color: #2E7D32;
            font-weight: 700;
        }

        .vocab-table.die .article,
        .vocab-table.die .german-word {
            color: #C62828;
            font-weight: 700;
        }
        /* MOBILE-RESPONSIVE NOUNS TABLE */
        @media (max-width: 768px) {
            .vocab-table {
                display: none; /* Hide table on mobile */
            }

            .mobile-noun-card {
                display: block;
                background: white;
                border-left: 5px solid;
                border-radius: 8px;
                padding: 15px;
                margin: 10px 0;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .mobile-noun-card.der {
                border-color: #2196F3;
                background: #E3F2FD;
            }

            .mobile-noun-card.das {
                border-color: #4CAF50;
                background: #E8F5E9;
            }

            .mobile-noun-card.die {
                border-color: #F44336;
                background: #FFEBEE;
            }

            .mobile-noun-card:active {
                transform: scale(0.98);
            }

            .mobile-noun-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
            }

            .mobile-article-word {
                font-size: 1.3em;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .mobile-article-word.der {
                color: #1565C0;
            }

            .mobile-article-word.das {
                color: #2E7D32;
            }

            .mobile-article-word.die {
                color: #C62828;
            }

            .mobile-audio-btn {
                background: #FFCE00;
                border: none;
                padding: 8px 12px;
                border-radius: 15px;
                font-size: 1.1em;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            }

            .mobile-audio-btn:active {
                transform: scale(0.95);
            }

            .mobile-noun-details {
                display: grid;
                grid-template-columns: auto 1fr;
                gap: 8px 12px;
                font-size: 0.95em;
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(0,0,0,0.1);
            }

            .mobile-label {
                font-weight: 600;
                color: #666;
            }

            .mobile-plural {
                color: #764ba2;
                font-style: italic;
                font-weight: 600;
            }

            .mobile-english {
                color: #444;
            }

            /* Show mobile cards only on mobile */
            .mobile-noun-cards {
                display: none;
            }

            @media (max-width: 768px) {
                .mobile-noun-cards {
                    display: block;
                }
            }
        }

        /* Desktop: hide mobile cards */
        @media (min-width: 769px) {
            .mobile-noun-cards {
                display: none;
            }
        }
        .german-word {
            font-size: 1.2em;
        }

        .english-word {
            color: #666;
        }

        .plural {
            color: #764ba2;
            font-style: italic;
            font-weight: 600;
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .word-pair {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            cursor: pointer;
        }

        .word-pair:hover {
            transform: scale(1.05);
        }

        .word-pair .german {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .word-pair .english {
            font-size: 1em;
            opacity: 0.9;
        }

        .opposite-arrow {
            font-size: 1.5em;
            margin: 10px 0;
        }

        .word-pair .card-audio-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .word-pair .card-audio-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .expression-list {
            list-style: none;
            padding: 0;
        }

        .expression-item {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 20px;
            border-left: 5px solid #DD0000;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .expression-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            background: #fff;
        }

        .expression-german {
            font-size: 1.4em;
            font-weight: bold;
            color: #000;
            margin-bottom: 5px;
        }

        .expression-english {
            font-size: 1.1em;
            color: #666;
        }

        .conversation {
            margin: 20px 0;
        }

        .message {
            margin: 15px 0;
            padding: 15px 20px;
            border-radius: 20px;
            max-width: 80%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .message:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transform: translateX(5px);
        }

        .message-a {
            background: #667eea;
            color: white;
            margin-left: 0;
            border-bottom-left-radius: 5px;
        }

        .message-b {
            background: #f093fb;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .message-german {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .message-english {
            font-size: 0.95em;
            opacity: 0.9;
            font-style: italic;
        }

        .qa-container {
            display: grid;
            gap: 20px;
        }

        .qa-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .qa-card:hover {
            border-color: #DD0000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .question {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .answer {
            font-size: 1.1em;
            color: #333;
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }

        .qa-card:hover .answer {
            display: block;
        }

        .sentence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .sentence-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sentence-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .sentence-german {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .sentence-english {
            font-size: 1em;
            opacity: 0.9;
        }

        .audio-btn {
            background: #FFCE00;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .audio-btn:hover {
            background: #DD0000;
            color: white;
            transform: scale(1.1);
        }

        .audio-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }

        .audio-status.show {
            display: flex;
        }

        .audio-status .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
        }

        footer p {
            margin: 10px 0;
        }

        .section-icon {
            font-size: 2em;
            margin-right: 10px;
            vertical-align: middle;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            .tabs {
                flex-direction: column;
            }
            .tab-button {
                width: 100%;
            }
            .word-grid {
                grid-template-columns: 1fr;
            }
            .sentence-grid {
                grid-template-columns: 1fr;
            }
            .message {
                max-width: 90%;
            }
            .audio-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<!-- NAVIGATION -->
<div style="background: #000; padding: 15px; text-align: center;">
    <a href="../index.html" style="color: #FFCE00; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üè† Home</a>
    <a href="../index.html#levels" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üìö Levels</a>
    <a href="../index.html#categories" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üéØ Categories</a>
    <a href="../tools/progress.html" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">üìä Progress</a>
    <a href="../about.html" style="color: white; text-decoration: none; margin: 0 10px; font-size: 1.1em;">‚ÑπÔ∏è About</a>
</div>

    <!-- ============================================ -->
    <!-- EDIT SECTION 1: HEADER INFORMATION -->
    <!-- ============================================ -->
    <header>
        <h1>üá©üá™ Recht 4 Gefahrstoffrecht, Chemikalienrecht und Lebensmittelrecht</h1>
        <p id="headerTopic">Recht 4 Gefahrstoffrecht, Chemikalienrecht und Lebensmittelrecht | Interactive Audio Learning</p>
        <p style="font-size: 0.9em; margin-top: 10px;"Created by: aliattia02 | Date: 2025-11-16</p>
    </header>

    <div class="container">
        <div class="audio-controls">
            <h3>üîä Audio Settings</h3>
            <div class="control-group">
                <label for="voiceSelect">Voice:</label>
                <select id="voiceSelect">
                    <option value="">Loading voices...</option>
                </select>
            </div>
            <div class="control-group">
                <label for="speedControl">Speed:</label>
                <input type="range" id="speedControl" min="0.5" max="1.5" step="0.1" value="0.8">
                <span id="speedValue">0.8x</span>
            </div>
            <div class="control-group">
                <label for="pitchControl">Pitch:</label>
                <input type="range" id="pitchControl" min="0.5" max="2" step="0.1" value="1">
                <span id="pitchValue">1.0</span>
            </div>
            <button class="play-all-btn" onclick="playAllInSection()">‚ñ∂ Play All in Section</button>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="showTab('nouns')">üìö Nouns</button>
            <button class="tab-button" onclick="showTab('adjectives')">‚ú® Adjectives</button>
            <button class="tab-button" onclick="showTab('verbs')">‚ö° Verbs</button>
            <button class="tab-button" onclick="showTab('expressions')">üí¨ Key Expressions</button>
            <button class="tab-button" onclick="showTab('conversations')">üó£Ô∏è Conversations</button>
            <button class="tab-button" onclick="showTab('qa')">‚ùì Q&A Practice</button>
            <button class="tab-button" onclick="showTab('sentences')">üìù Quick Sentences</button>
        </div>

        <div id="nouns" class="tab-content active">
            <div class="card">
                <h2><span class="section-icon">üìö</span>Nouns - Die Nomen</h2>
                <div id="nounsContainer"></div>
            </div>
        </div>

        <div id="adjectives" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ú®</span>Adjectives - Die Adjektive</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any card to hear the pronunciation!</p>
                <div id="adjectivesContainer" class="word-grid"></div>
            </div>
        </div>

        <div id="verbs" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ö°</span>Verbs - Die Verben</h2>
                <p style="margin-bottom: 20px;"><strong>*</strong> = Weak Verb | <strong>+</strong> = Strong Verb</p>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any card to hear the pronunciation!</p>
                <div id="verbsContainer" class="word-grid"></div>
            </div>
        </div>

        <div id="expressions" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üí¨</span>Key Expressions - Wichtige Ausdr√ºcke</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any expression to hear the pronunciation!</p>
                <ul id="expressionsContainer" class="expression-list"></ul>
            </div>
        </div>

        <div id="conversations" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üó£Ô∏è</span>Mini Conversations - Kurze Gespr√§che</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any message to hear it!</p>
                <div id="conversationsContainer"></div>
            </div>
        </div>

        <div id="qa" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">‚ùì</span>Q&A Practice - Fragen und Antworten</h2>
                <p style="margin-bottom: 20px; font-style: italic; color: #666;">üí° Hover over each card to see the answer, or click to hear it!</p>
                <div id="qaContainer" class="qa-container"></div>
            </div>
        </div>

        <div id="sentences" class="tab-content">
            <div class="card">
                <h2><span class="section-icon">üìù</span>Quick Sentences - Schnelle S√§tze</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">üí° Click on any sentence to hear it!</p>
                <div id="sentencesContainer" class="sentence-grid"></div>
            </div>
        </div>
    </div>

    <div class="audio-status" id="audioStatus">
        <div class="spinner"></div>
        <span id="audioStatusText">Speaking...</span>
    </div>

    <footer>
        <p><strong>German Vocabulary - Interactive Audio Learning</strong></p>
        <p>Created for German Learners | ¬© 2025 aliattia02</p>
        <p>üîß Interactive Audio Learning Platform</p>
        <p style="margin-top: 20px; font-size: 0.9em;">
            üéØ Click anywhere to hear pronunciation | üí™ Practice makes perfect!
        </p>
        <p style="margin-top: 10px; font-size: 0.8em; opacity: 0.8;">
            Last Updated: 2025-11-16
        </p>
    </footer>

    <script>

// ============================================
// TOPIC: ARZNEIMITTELRECHT (Pharmaceutical Law)
// ============================================

// ============================================
// EDIT SECTION 2: CSV DATA - NOUNS
// ============================================
const nounsCSV = `
das,Gefahrstoffrecht,---,---,Hazardous substances law
das,Chemikalienrecht,---,---,Chemical law
das,Lebensmittelrecht,---,---,Food law
das,Gefahrstoffverzeichnis,-se,die Gefahrstoffverzeichnisse,Hazardous substances register
das,Sicherheitsdatenblatt,Sicherheitsdatenbl√§tter,die Sicherheitsdatenbl√§tter,Safety data sheet
das,Explosionsschutzdokument,-e,die Explosionsschutzdokumente,Explosion protection document
das,Piktogramm,-e,die Piktogramme,Pictogram
das,Gefahrenpiktogramm,-e,die Gefahrenpiktogramme,Hazard pictogram
das,Signalwort,-e,die Signalw√∂rter,Signal word
das,Etikett,-en,die Etiketten,Label
das,Abgabegef√§√ü,-e,die Abgabegef√§√üe,Dispensing container
das,Vorratsgef√§√ü,-e,die Vorratsgef√§√üe,Storage container
das,Standgef√§√ü,-e,die Standgef√§√üe,Stock container
das,Beh√§ltnis,-se,die Beh√§ltnisse,Container
das,Formblatt,Formbl√§tter,die Formbl√§tter,Form
das,Farbkonzept,-e,die Farbkonzepte,Color concept
das,Arbeitsschutzgesetz,-e,die Arbeitsschutzgesetze,Occupational safety law
das,Chemikaliengesetz,-e,die Chemikaliengesetze,Chemicals law
das,Mutterschutzgesetz,-e,die Mutterschutzgesetze,Maternity protection law
das,Jugendarbeitsschutzgesetz,-e,die Jugendarbeitsschutzgesetze,Youth employment protection law
das,GHS-System,-e,die GHS-Systeme,GHS system
das,Inverkehrbringen,---,---,Placing on market
das,Biozidprodukt,-e,die Biozidprodukte,Biocidal product
das,Desinfektionsmittel,=,die Desinfektionsmittel,Disinfectant
das,Fl√§chendesinfektionsmittel,=,die Fl√§chendesinfektionsmittel,Surface disinfectant
das,H√§ndedesinfektionsmittel,=,die H√§ndedesinfektionsmittel,Hand disinfectant
das,Nahrungserg√§nzungsmittel,=,die Nahrungserg√§nzungsmittel,Dietary supplement
das,Lebensmittel,=,die Lebensmittel,Food
das,Kosmetikum,Kosmetika,die Kosmetika,Cosmetic
das,Medizinprodukt,-e,die Medizinprodukte,Medical device
das,Gemisch,-e,die Gemische,Mixture
das,Reinstoff,-e,die Reinstoffe,Pure substance
das,L√∂sungsmittel,=,die L√∂sungsmittel,Solvent
das,Oxidationsmittel,=,die Oxidationsmittel,Oxidizing agent
das,CMR-Stoff,-e,die CMR-Stoffe,CMR substance
der,Gefahrstoff,-e,die Gefahrstoffe,Hazardous substance
der,Wirkstoff,-e,die Wirkstoffe,Active substance
der,Hilfsstoff,-e,die Hilfsstoffe,Excipient
der,Ausgangsstoff,-e,die Ausgangsstoffe,Starting material
der,Grundstoff,-e,die Grundstoffe,Basic substance
der,Explosivstoff,-e,die Explosivstoffe,Explosive
der,Gefahrenhinweis,-e,die Gefahrenhinweise,Hazard statement
der,Sicherheitshinweis,-e,die Sicherheitshinweise,Precautionary statement
der,H-Satz,H-S√§tze,die H-S√§tze,H-phrase
der,P-Satz,P-S√§tze,die P-S√§tze,P-phrase
der,EUH-Satz,EUH-S√§tze,die EUH-S√§tze,EUH-phrase
der,Arbeitsplatzgrenzwert,-e,die Arbeitsplatzgrenzwerte,Workplace limit value
der,Biologische Grenzwert,-e,die Biologischen Grenzwerte,Biological limit value
der,Flammpunkt,-e,die Flammpunkte,Flash point
der,Siedepunkt,-e,die Siedepunkte,Boiling point
der,Abzug,Abz√ºge,die Abz√ºge,Fume hood
der,Laborabzug,Laborabz√ºge,die Laborabz√ºge,Laboratory fume hood
der,Verschluss,Verschl√ºsse,die Verschl√ºsse,Closure
der,Schutzhandschuh,-e,die Schutzhandschuhe,Protective glove
der,Atemschutz,---,---,Respiratory protection
der,Augenschutz,---,---,Eye protection
der,Gesichtsschutz,---,---,Face protection
der,Arbeitgeber,=,die Arbeitgeber,Employer
der,Arbeitnehmer,=,die Arbeitnehmer,Employee
der,Besch√§ftigte,-n,die Besch√§ftigten,Employee
der,Verwender,=,die Verwender,User
der,Inverkehrbringer,=,die Inverkehrbringer,Marketer
der,Hersteller,=,die Hersteller,Manufacturer
der,Lieferant,-en,die Lieferanten,Supplier
der,H√§ndler,=,die H√§ndler,Trader
der,Verbraucher,=,die Verbraucher,Consumer
der,Missbrauch,Missbr√§uche,die Missbr√§uche,Abuse
der,Hautkontakt,-e,die Hautkontakte,Skin contact
der,Augenkontakt,-e,die Augenkontakte,Eye contact
der,UFI-Code,-s,die UFI-Codes,UFI code
der,Altwirkstoff,-e,die Altwirkstoffe,Old active substance
die,Gefahrstoffverordnung,-en,die Gefahrstoffverordnungen,Hazardous substances ordinance
die,CLP-Verordnung,-en,die CLP-Verordnungen,CLP regulation
die,REACH-Verordnung,-en,die REACH-Verordnungen,REACH regulation
die,Biozid-Verordnung,-en,die Biozid-Verordnungen,Biocidal products regulation
die,Chemikalienverbotsverordnung,-en,die Chemikalienverbotsverordnungen,Chemicals prohibition ordinance
die,Explosivstoffverordnung,-en,die Explosivstoffverordnungen,Explosives regulation
die,Nahrungserg√§nzungsmittelverordnung,-en,die Nahrungserg√§nzungsmittelverordnungen,Food supplement regulation
die,Einstufung,-en,die Einstufungen,Classification
die,Kennzeichnung,-en,die Kennzeichnungen,Labeling
die,Verpackung,-en,die Verpackungen,Packaging
die,Gef√§hrdungsbeurteilung,-en,die Gef√§hrdungsbeurteilungen,Risk assessment
die,Betriebsanweisung,-en,die Betriebsanweisungen,Operating instruction
die,Unterweisung,-en,die Unterweisungen,Instruction
die,Sachkunde,---,---,Expertise
die,Fachkunde,---,---,Specialized knowledge
die,Schutzma√ünahme,-n,die Schutzma√ünahmen,Protective measure
die,Substitution,-en,die Substitutionen,Substitution
die,Exposition,-en,die Expositionen,Exposure
die,Gef√§hrdung,-en,die Gef√§hrdungen,Hazard
die,Gesundheitsgefahr,-en,die Gesundheitsgefahren,Health hazard
die,Brandgefahr,-en,die Brandgefahren,Fire hazard
die,Explosionsgefahr,-en,die Explosionsgefahren,Explosion hazard
die,Umweltgefahr,-en,die Umweltgefahren,Environmental hazard
die,Gefahrenklasse,-n,die Gefahrenklassen,Hazard class
die,Gefahrenkategorie,-n,die Gefahrenkategorien,Hazard category
die,Akute Toxizit√§t,---,---,Acute toxicity
die,√Ñtzwirkung,-en,die √Ñtzwirkungen,Corrosive effect
die,Reizwirkung,-en,die Reizwirkungen,Irritant effect
die,Sensibilisierung,-en,die Sensibilisierungen,Sensitization
die,Aspirationsgefahr,-en,die Aspirationsgefahren,Aspiration hazard
die,Kanzerogenit√§t,---,---,Carcinogenicity
die,Keimzellmutagenit√§t,---,---,Germ cell mutagenicity
die,Reproduktionstoxizit√§t,---,---,Reproductive toxicity
die,Zielorgantoxizit√§t,---,---,Target organ toxicity
die,Entz√ºndbarkeit,---,---,Flammability
die,Meldung,-en,die Meldungen,Notification
die,Meldepflicht,-en,die Meldepflichten,Notification obligation
die,Mitteilungspflicht,-en,die Mitteilungspflichten,Communication obligation
die,Registriernummer,-n,die Registriernummern,Registration number
die,Zulassungsnummer,-n,die Zulassungsnummern,Authorization number
die,Chargennummer,-n,die Chargennummern,Batch number
die,EG-Nummer,-n,die EG-Nummern,EC number
die,Index-Nummer,-n,die Index-Nummern,Index number
die,Blindentastmarke,-n,die Blindentastmarken,Tactile warning
die,Kleinmengenregelung,-en,die Kleinmengenregelungen,Small quantity regulation
die,Rangfolgeregelung,-en,die Rangfolgeregelungen,Precedence rule
die,√úbergangsregelung,-en,die √úbergangsregelungen,Transitional provision
die,Abgabebeschr√§nkung,-en,die Abgabebeschr√§nkungen,Supply restriction
die,Abgabeerlaubnis,-se,die Abgabeerlaubnisse,Supply authorization
die,Endverbleibserkl√§rung,-en,die Endverbleibserkl√§rungen,End-use declaration
die,Identit√§tsfeststellung,-en,die Identit√§tsfeststellungen,Identity verification
die,Dokumentation,-en,die Dokumentationen,Documentation
die,Aufbewahrungsfrist,-en,die Aufbewahrungsfristen,Retention period
die,Lagerung,-en,die Lagerungen,Storage
die,Entsorgung,-en,die Entsorgungen,Disposal
die,Giftinformationszentrale,-n,die Giftinformationszentralen,Poison information center
die,Bundesopiumstelle,-n,die Bundesopiumstellen,Federal Opium Agency
die,Bundesanstalt f√ºr Arbeitsschutz,---,---,Federal Institute for Occupational Safety
die,Europ√§ische Chemikalienagentur,---,---,European Chemicals Agency
die,Produktart,-en,die Produktarten,Product type
die,Hauptgruppe,-n,die Hauptgruppen,Main group
die,Zweckbestimmung,-en,die Zweckbestimmungen,Intended purpose
die,Werbung,-en,die Werbungen,Advertising
die,Bereitstellung,---,---,Provision
die,Vermarktung,-en,die Vermarktungen,Marketing
die,Verkehrsf√§higkeit,---,---,Marketability

`.trim();

// ============================================
// EDIT SECTION 3: CSV DATA - ADJECTIVES
// ============================================
const adjectivesCSV = `
-gef√§hrlich,hazardous,-ungef√§hrlich,non-hazardous
-giftig,toxic,-ungiftig,non-toxic
-√§tzend,corrosive,-nicht-√§tzend,non-corrosive
-reizend,irritant,-nicht-reizend,non-irritant
-entz√ºndbar,flammable,-nicht-entz√ºndbar,non-flammable
-leichtentz√ºndbar,highly-flammable,-schwer-entz√ºndbar,flame-retardant
-explosiv,explosive,-nicht-explosiv,non-explosive
-oxidierend,oxidizing,-reduzierend,reducing
-sensibilisierend,sensitizing,-nicht-sensibilisierend,non-sensitizing
-krebserzeugend,carcinogenic,-nicht-krebserzeugend,non-carcinogenic
-erbgutver√§ndernd,mutagenic,-nicht-erbgutver√§ndernd,non-mutagenic
-fortpflanzungsgef√§hrdend,reprotoxic,-nicht-fortpflanzungsgef√§hrdend,non-reprotoxic
-gesundheitssch√§dlich,harmful-to-health,-gesundheitsf√∂rdernd,health-promoting
-umweltgef√§hrlich,environmentally-hazardous,-umweltfreundlich,environmentally-friendly
-wassergef√§hrdend,water-polluting,-wasserneutral,water-neutral
-akut-toxisch,acutely-toxic,-chronisch-toxisch,chronically-toxic
-verschreibungspflichtig,prescription-only,-freiverk√§uflich,over-the-counter
-zugelassen,authorized,-nicht-zugelassen,unauthorized
-registriert,registered,-nicht-registriert,unregistered
-gemeldet,notified,-nicht-gemeldet,unnotified
-kennzeichnungspflichtig,requiring-labeling,-kennzeichnungsfrei,not-requiring-labeling
-meldepflichtig,notifiable,-nicht-meldepflichtig,non-notifiable
-genehmigt,approved,-nicht-genehmigt,not-approved
-zulassungspflichtig,requiring-authorization,-zulassungsfrei,not-requiring-authorization
-sachkundig,expert,-unsachkundig,inexpert
-fachkundig,professionally-competent,-nicht-fachkundig,not-professionally-competent
-kindergesichert,child-resistant,-nicht-kindergesichert,not-child-resistant
-innerbetrieblich,in-house,-au√üerbetrieblich,external
-berufsm√§√üig,professional,-privat,private
-gewerblich,commercial,-nicht-gewerblich,non-commercial
-verd√§chtig,suspicious,-unverd√§chtig,unsuspicious
-irref√ºhrend,misleading,-korrekt,correct

`.trim();

// ============================================
// EDIT SECTION 4: CSV DATA - VERBS
// ============================================
const verbsCSV = `
*einstufen,classify,*kennzeichnen,label
*verpacken,package,*auspacken,unpack
*lagern,store,*entsorgen,dispose
*abgeben,dispense,*erwerben,acquire
*herstellen,manufacture,*vernichten,destroy
*bereitstellen,provide,*zur√ºckhalten,withhold
*vermarkten,market,*zur√ºckrufen,recall
*verwenden,use,*missbrauchen,misuse
*anmelden,register,*abmelden,deregister
*melden,notify,*verschweigen,conceal
*dokumentieren,document,*l√∂schen,delete
*genehmigen,approve,*ablehnen,reject
*zulassen,authorize,*verbieten,prohibit
*registrieren,register,*streichen,delete
*umf√ºllen,decant,*abf√ºllen,fill
*etikettieren,label,*entfernen,remove
*aufbewahren,keep,*wegwerfen,discard
*sch√ºtzen,protect,*gef√§hrden,endanger
*ersetzen,substitute,*beibehalten,retain
*aktualisieren,update,*veralten,become-obsolete
*best√§tigen,confirm,*widerrufen,revoke
*beauftragen,commission,*entbinden,release
*unterweisen,instruct,*vernachl√§ssigen,neglect
*√ºberpr√ºfen,verify,*ignorieren,ignore
*einhalten,comply-with,*versto√üen-gegen,violate
*beraten,advise,*irref√ºhren,mislead
*informieren,inform,*verheimlichen,hide
*nachweisen,prove,*verschleiern,obscure
*festlegen,establish,*√§ndern,change
*durchf√ºhren,carry-out,*unterlassen,omit
+gelten,be-valid,+verfallen,expire
+bestehen,exist,+entfallen,lapse
+unterliegen,be-subject-to,+befreien,exempt
+vorliegen,be-present,+fehlen,be-missing
+ausgehen-von,emanate-from,+zur√ºckgehen,decrease
+enthalten,contain,+ausschlie√üen,exclude
+erfordern,require,+verzichten-auf,waive
+gew√§hrleisten,ensure,+gef√§hrden,jeopardize

`.trim();

// ============================================
// EDIT SECTION 5: CSV DATA - EXPRESSIONS
// ============================================
const expressionsCSV = `
Ist das Produkt zugelassen?,Is the product authorized?
Welche Schutzma√ünahmen sind erforderlich?,What protective measures are required?
Das Sicherheitsdatenblatt liegt vor.,The safety data sheet is available.
Die Kennzeichnung muss aktualisiert werden.,The labeling must be updated.
Ist eine Meldung erforderlich?,Is notification required?
Das Produkt f√§llt unter die √úbergangsregelung.,The product falls under transitional provisions.
Eine Sachkunde ist nachzuweisen.,Expertise must be proven.
Die Identit√§t ist festzustellen.,Identity must be verified.
Das Abgabebuch ist zu f√ºhren.,The supply record must be maintained.
Schutzhandschuhe sind zu tragen.,Protective gloves must be worn.
Der Arbeitsplatzgrenzwert ist einzuhalten.,The workplace limit value must be observed.
Eine Gef√§hrdungsbeurteilung ist zu erstellen.,A risk assessment must be prepared.
Die Betriebsanweisung ist auszuh√§ngen.,The operating instruction must be posted.
Die Mitarbeiter sind zu unterweisen.,Employees must be instructed.
Das Produkt ist kindergesichert zu verpacken.,The product must be packaged with child-resistant closure.
Eine Blindentastmarke ist anzubringen.,A tactile warning must be attached.
Das Gemisch ist zu melden.,The mixture must be notified.
Die Registriernummer ist anzugeben.,The registration number must be stated.
Ein UFI-Code ist zu generieren.,A UFI code must be generated.
Die Zulassungsnummer ist auf dem Etikett.,The authorization number is on the label.

`.trim();

// ============================================
// EDIT SECTION 6: CSV DATA - CONVERSATIONS
// ============================================
const conversationsCSV = `
Gefahrstoffabgabe|A,Guten Tag ich ben√∂tige Isopropanol.,Good day I need isopropanol.
Gefahrstoffabgabe|B,F√ºr welchen Verwendungszweck?,For what purpose?
Gefahrstoffabgabe|A,Zur Desinfektion von Oberfl√§chen.,For disinfection of surfaces.
Gefahrstoffabgabe|B,Ich ben√∂tige Ihren Ausweis zur Identit√§tsfeststellung.,I need your ID for identity verification.
Gefahrstoffabgabe|A,Hier bitte.,Here please.
Gefahrstoffabgabe|B,Ich muss Sie √ºber die Gefahren aufkl√§ren.,I must inform you about the hazards.
Gefahrstoffabgabe|A,Verstanden.,Understood.
Gefahrstoffabgabe|B,Bitte unterschreiben Sie im Abgabebuch.,Please sign in the supply record.
Meldepflicht|A,Muss dieses Desinfektionsmittel gemeldet werden?,Must this disinfectant be notified?
Meldepflicht|B,Ja es f√§llt unter die √úbergangsregelung.,Yes it falls under transitional provisions.
Meldepflicht|A,Wie erfolgt die Meldung?,How is the notification made?
Meldepflicht|B,√úber das Online-Portal der BAuA.,Via the BAuA online portal.
Meldepflicht|A,Welche Angaben sind erforderlich?,What information is required?
Meldepflicht|B,Wirkstoffe Konzentrationen und Verwendungszweck.,Active substances concentrations and intended use.
Meldepflicht|A,Erhalte ich eine Registriernummer?,Will I receive a registration number?
Meldepflicht|B,Ja diese ist auf dem Etikett anzugeben.,Yes this must be stated on the label.
Kennzeichnung|A,Wie muss das Etikett aussehen?,How must the label look?
Kennzeichnung|B,Es m√ºssen Gefahrenpiktogramme vorhanden sein.,Hazard pictograms must be present.
Kennzeichnung|A,Welche H-S√§tze sind anzugeben?,Which H-phrases must be stated?
Kennzeichnung|B,Die aus dem Sicherheitsdatenblatt ersichtlichen.,Those evident from the safety data sheet.
Kennzeichnung|A,Sind P-S√§tze auch erforderlich?,Are P-phrases also required?
Kennzeichnung|B,Ja maximal sechs P-S√§tze.,Yes maximum six P-phrases.

`.trim();

// ============================================
// EDIT SECTION 7: CSV DATA - Q&A
// ============================================
const qaCSV = `
Was ist ein Gefahrstoff?,Ein Stoff mit gef√§hrlichen Eigenschaften. (A substance with hazardous properties.)
Was bedeutet CMR?,Krebserzeugend mutagen reproduktionstoxisch. (Carcinogenic mutagenic reprotoxic.)
Was ist ein H-Satz?,Ein standardisierter Gefahrenhinweis. (A standardized hazard statement.)
Was ist ein P-Satz?,Ein standardisierter Sicherheitshinweis. (A standardized precautionary statement.)
Wof√ºr steht GHS?,Globally Harmonized System. (Globally Harmonized System.)
Was ist die CLP-Verordnung?,Classification Labelling Packaging Verordnung. (Classification Labelling Packaging regulation.)
Was ist ein Sicherheitsdatenblatt?,Ein Dokument mit Informationen zu Gefahrstoffen. (A document with information on hazardous substances.)
Wann ist eine Meldung erforderlich?,Bei Biozidprodukten mit Altwirkstoffen. (For biocidal products with old active substances.)
Was ist ein UFI-Code?,Unique Formula Identifier f√ºr Gemische. (Unique Formula Identifier for mixtures.)
Was ist ein Biozidprodukt?,Ein Mittel zur Bek√§mpfung von Schadorganismen. (An agent to combat harmful organisms.)
Wann ist eine Zulassung erforderlich?,Bei Inverkehrbringen von Biozidprodukten. (When placing biocidal products on market.)
Was ist eine Gef√§hrdungsbeurteilung?,Bewertung der Gef√§hrdung am Arbeitsplatz. (Assessment of workplace hazards.)
Was ist eine Betriebsanweisung?,Anweisung f√ºr den sicheren Umgang. (Instruction for safe handling.)
Was ist Sachkunde?,Bef√§higung zur Aus√ºbung bestimmter Aufgaben. (Qualification for performing certain tasks.)
Was ist die BAuA?,Bundesanstalt f√ºr Arbeitsschutz und Arbeitsmedizin. (Federal Institute for Occupational Safety.)
Was ist die ECHA?,Europ√§ische Chemikalienagentur. (European Chemicals Agency.)
Was ist eine Produktart?,Kategorisierung nach Anwendungszweck. (Categorization by application purpose.)
Was ist ein Altwirkstoff?,Wirkstoff der vor 2000 im Verkehr war. (Active substance marketed before 2000.)
Was ist eine √úbergangsregelung?,Regelung w√§hrend des Genehmigungsverfahrens. (Regulation during approval process.)
Was bedeutet PT?,Produktart bei Biozidprodukten. (Product type for biocidal products.)

`.trim();

// ============================================
// EDIT SECTION 8: CSV DATA - SENTENCES
// ============================================
const sentencesCSV = `
Gefahrstoffe m√ºssen korrekt gekennzeichnet werden.,Hazardous substances must be correctly labeled.
Das Sicherheitsdatenblatt ist bereitzustellen.,The safety data sheet must be provided.
Eine Gef√§hrdungsbeurteilung ist zu erstellen.,A risk assessment must be prepared.
Besch√§ftigte sind regelm√§√üig zu unterweisen.,Employees must be regularly instructed.
CMR-Stoffe erfordern besondere Schutzma√ünahmen.,CMR substances require special protective measures.
Die Einstufung erfolgt nach CLP-Verordnung.,Classification is carried out according to CLP regulation.
Gefahrenpiktogramme warnen vor Gefahren.,Hazard pictograms warn of dangers.
H-S√§tze beschreiben die Art der Gefahr.,H-phrases describe the type of hazard.
P-S√§tze geben Sicherheitshinweise.,P-phrases provide safety advice.
Biozidprodukte ben√∂tigen eine Zulassung.,Biocidal products require authorization.
Altwirkstoffe unterliegen √úbergangsregelungen.,Old active substances are subject to transitional provisions.
Eine Meldung erfolgt √ºber das BAuA-Portal.,Notification is made via the BAuA portal.
Die Registriernummer ist anzugeben.,The registration number must be stated.
Gemische sind meldepflichtig.,Mixtures are subject to notification.
Ein UFI-Code identifiziert das Produkt.,A UFI code identifies the product.
Kindergesicherte Verschl√ºsse sind vorgeschrieben.,Child-resistant closures are required.
Blindentastmarken warnen Sehbehinderte.,Tactile warnings alert visually impaired.
Die Abgabe ist zu dokumentieren.,Supply must be documented.
Die Identit√§t ist festzustellen.,Identity must be verified.
Arbeitsplatzgrenzwerte sind einzuhalten.,Workplace limit values must be observed.

`.trim();

        // ============================================
        // SPEECH SYNTHESIS - FIXED FOR PLURAL ISSUE
        // ============================================
        let germanVoice = null;
        let currentUtterance = null;
        let isSpeaking = false;
        let isPlayingSequence = false; // NEW: Track if playing a sequence

        function loadVoices() {
            const voices = window.speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            voiceSelect.innerHTML = '';

            const germanVoices = voices.filter(voice => voice.lang.startsWith('de'));

            if (germanVoices.length === 0) {
                voiceSelect.innerHTML = '<option value="">No German voice found - Using default</option>';
                germanVoice = voices.find(v => v.lang.includes('en')) || voices[0];
            } else {
                germanVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                    if (index === 0) germanVoice = voice;
                });
            }
            console.log('‚úÖ Voice loaded:', germanVoice ? germanVoice.name : 'None');
        }

        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        loadVoices();
        setTimeout(loadVoices, 100);
        setTimeout(loadVoices, 500);

        document.getElementById('voiceSelect').addEventListener('change', function(e) {
            stopAllSpeech();
            const voices = window.speechSynthesis.getVoices();
            const germanVoices = voices.filter(voice => voice.lang.startsWith('de'));
            germanVoice = germanVoices[e.target.value] || voices[0];
            console.log('üîÑ Voice changed to:', germanVoice ? germanVoice.name : 'default');
        });

        document.getElementById('speedControl').addEventListener('input', function(e) {
            document.getElementById('speedValue').textContent = e.target.value + 'x';
        });

        document.getElementById('pitchControl').addEventListener('input', function(e) {
            document.getElementById('pitchValue').textContent = e.target.value;
        });

        // IMPROVED: Simple speak function without debouncing for sequences
        function speak(text, callback) {
            if (!text || text.trim() === '') {
                console.warn('‚ö†Ô∏è Empty text, skipping');
                if (callback) callback();
                return;
            }

            text = text.replace('üîä', '').trim();

            // Only stop if NOT playing a sequence
            if (!isPlayingSequence) {
                stopAllSpeech();
            }

            setTimeout(() => {
                speakNow(text, callback);
            }, 100);
        }

        function stopAllSpeech() {
            isPlayingSequence = false;
            window.speechSynthesis.cancel();
            isSpeaking = false;
            hideAudioStatus();
            console.log('‚èπÔ∏è All speech stopped');
        }

        function speakNow(text, callback) {
            if (!('speechSynthesis' in window)) {
                alert('‚ö†Ô∏è Text-to-speech not supported.\n\nUse Chrome, Firefox, Edge, or Safari.');
                if (callback) callback();
                return;
            }

            showAudioStatus(text);
            console.log('üó£Ô∏è Speaking:', text);

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'de-DE';
            if (germanVoice) utterance.voice = germanVoice;
            utterance.rate = parseFloat(document.getElementById('speedControl').value);
            utterance.pitch = parseFloat(document.getElementById('pitchControl').value);
            utterance.volume = 1.0;

            let hasEnded = false;

            utterance.onstart = function() {
                isSpeaking = true;
                console.log('‚ñ∂Ô∏è Started:', text.substring(0, 40));
            };

            utterance.onend = function() {
                if (hasEnded) return;
                hasEnded = true;
                isSpeaking = false;
                hideAudioStatus();
                console.log('‚úÖ Ended:', text.substring(0, 40));
                if (callback) setTimeout(callback, 100);
            };

            utterance.onerror = function(event) {
                if (hasEnded) return;
                hasEnded = true;
                isSpeaking = false;
                hideAudioStatus();
                
                if (event.error !== 'interrupted' && event.error !== 'canceled') {
                    console.error('‚ùå Speech error:', event.error);
                } else {
                    console.log('‚ÑπÔ∏è Speech ' + event.error);
                }
                if (callback) callback();
            };

            currentUtterance = utterance;

            try {
                window.speechSynthesis.speak(utterance);
            } catch (error) {
                console.error('‚ùå Speak failed:', error);
                isSpeaking = false;
                hideAudioStatus();
                if (callback) callback();
            }
        }

        function showAudioStatus(text) {
            const status = document.getElementById('audioStatus');
            const statusText = document.getElementById('audioStatusText');
            const displayText = text.length > 40 ? text.substring(0, 40) + '...' : text;
            statusText.textContent = `üîä ${displayText}`;
            status.classList.add('show');
        }

        function hideAudioStatus() {
            setTimeout(() => {
                document.getElementById('audioStatus').classList.remove('show');
            }, 300);
        }

        // ============================================
        // SPECIFIC SPEAK FUNCTIONS
        // ============================================
        function speakAdjective(word1, word2) {
            if (event) event.stopPropagation();
            console.log('üî§ Adjective pair:', word1, word2);
            isPlayingSequence = true;
            speak(word1, function() {
                setTimeout(() => {
                    speak(word2, function() {
                        isPlayingSequence = false;
                    });
                }, 800);
            });
        }

        function speakVerb(verb1, verb2) {
            if (event) event.stopPropagation();
            const cleanVerb1 = verb1.replace(/[\*\+]/g, '').trim();
            const cleanVerb2 = verb2.replace(/[\*\+]/g, '').trim();
            console.log('‚ö° Verb pair:', cleanVerb1, cleanVerb2);
            isPlayingSequence = true;
            speak(cleanVerb1, function() {
                setTimeout(() => {
                    speak(cleanVerb2, function() {
                        isPlayingSequence = false;
                    });
                }, 800);
            });
        }

        function speakQA(question, answer) {
            if (event) event.stopPropagation();
            console.log('‚ùì Q&A:', question, answer);
            isPlayingSequence = true;
            speak(question, function() {
                setTimeout(() => {
                    speak(answer, function() {
                        isPlayingSequence = false;
                    });
                }, 1200);
            });
        }

        // NEW: Noun function with plural
        function speakNounRow(article, singular, pluralFull) {
            if (event) event.stopPropagation();
            speakNounWithPlural(article, singular, pluralFull);
        }

        function speakNounWithPlural(article, singular, pluralFull) {
            console.log('üìö Noun with plural:', article, singular, '‚Üí', pluralFull);
            isPlayingSequence = true;
            
            speak(`${article} ${singular}`, function() {
                if (pluralFull !== '---' && pluralFull !== 'kein Plural') {
                    setTimeout(() => {
                        speak(pluralFull, function() {
                            isPlayingSequence = false;
                        });
                    }, 300);
                } else {
                    isPlayingSequence = false;
                }
            });
        }

        // ============================================
        // PLAY ALL IN SECTION
        // ============================================
        let playAllActive = false;
        let playAllIndex = 0;
        let playAllTexts = [];

        function playAllInSection() {
            const playBtn = document.querySelector('.play-all-btn');

            if (playAllActive) {
                playAllActive = false;
                stopAllSpeech();
                playBtn.textContent = '‚ñ∂ Play All in Section';
                console.log('‚èπÔ∏è Play all stopped');
                return;
            }

            const activeTab = document.querySelector('.tab-content.active');
            const tabId = activeTab.id;
            playAllTexts = [];

            switch(tabId) {
                case 'nouns':
                    const nounsData = parseCSV(nounsCSV);
                    nounsData.forEach(row => {
                        const [article, german, pluralNotation, pluralFull, english] = row;
                        playAllTexts.push(`${article} ${german}`);
                        if (pluralFull !== '---' && pluralFull !== 'kein Plural') {
                            playAllTexts.push(pluralFull);
                        }
                    });
                    break;

                case 'adjectives':
                    const adjCards = activeTab.querySelectorAll('.word-pair');
                    adjCards.forEach(card => {
                        const germans = card.querySelectorAll('.german');
                        germans.forEach(g => playAllTexts.push(g.textContent.trim()));
                    });
                    break;

                case 'verbs':
                    const verbCards = activeTab.querySelectorAll('.word-pair');
                    verbCards.forEach(card => {
                        const germans = card.querySelectorAll('.german');
                        germans.forEach(g => {
                            const cleanText = g.textContent.replace(/[\*\+]/g, '').trim();
                            playAllTexts.push(cleanText);
                        });
                    });
                    break;

                case 'expressions':
                    const exprs = activeTab.querySelectorAll('.expression-german');
                    exprs.forEach(expr => playAllTexts.push(expr.textContent.replace('üîä', '').trim()));
                    break;

                case 'conversations':
                    const messages = activeTab.querySelectorAll('.message-german');
                    messages.forEach(msg => playAllTexts.push(msg.textContent.replace('üîä', '').trim()));
                    break;

                case 'qa':
                    const questions = activeTab.querySelectorAll('.question');
                    questions.forEach(q => playAllTexts.push(q.textContent.replace('üîä', '').trim()));
                    break;

                case 'sentences':
                    const sentences = activeTab.querySelectorAll('.sentence-german');
                    sentences.forEach(s => playAllTexts.push(s.textContent.replace('üîä', '').trim()));
                    break;
            }

            if (playAllTexts.length === 0) {
                alert('No items to play in this section.');
                return;
            }

            console.log('üìö Playing', playAllTexts.length, 'items');
            playAllActive = true;
            isPlayingSequence = true;
            playAllIndex = 0;
            playBtn.textContent = '‚èπÔ∏è Stop Playing';

            playNextInSequence(playBtn);
        }

        function playNextInSequence(playBtn) {
            if (!playAllActive || playAllIndex >= playAllTexts.length) {
                playAllActive = false;
                isPlayingSequence = false;
                playBtn.textContent = '‚ñ∂ Play All in Section';
                hideAudioStatus();

                if (playAllIndex >= playAllTexts.length) {
                    setTimeout(() => {
                        alert('‚úÖ Finished playing all ' + playAllTexts.length + ' items!');
                    }, 500);
                }
                return;
            }

            const progress = Math.round(((playAllIndex + 1) / playAllTexts.length) * 100);
            console.log(`üîä Progress: ${playAllIndex + 1}/${playAllTexts.length} (${progress}%)`);

            const currentText = playAllTexts[playAllIndex];
            playAllIndex++;

            speak(currentText, function() {
                setTimeout(() => {
                    playNextInSequence(playBtn);
                }, 1000);
            });
        }

        // ============================================
        // TAB SWITCHING
        // ============================================
        function showTab(tabName) {
            stopAllSpeech();
            playAllActive = false;

            const playBtn = document.querySelector('.play-all-btn');
            if (playBtn) playBtn.textContent = '‚ñ∂ Play All in Section';

            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            if (event && event.target) event.target.classList.add('active');

            console.log('üìë Tab:', tabName);
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // ============================================
        // CSV PARSERS AND RENDERERS
        // ============================================
        function parseCSV(csv) {
            return csv.split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0)
                .map(line => line.split(',').map(cell => cell.trim()));
        }

                function renderNouns() {
            const data = parseCSV(nounsCSV);
            const grouped = { das: [], der: [], die: [] };

            data.forEach(row => {
                const [article, german, pluralNotation, pluralFull, english] = row;
                grouped[article].push({ article, german, pluralNotation, pluralFull, english });
            });

            const articles = [
                { key: 'der', label: 'Maskulinum (der)', color: '#2196F3' },
                { key: 'das', label: 'Neutrum (das)', color: '#4CAF50' },
                { key: 'die', label: 'Femininum (die)', color: '#F44336' }
            ];

            // ============================================
            // DESKTOP TABLE VIEW
            // ============================================
            let tableHtml = '';
            articles.forEach(({ key, label, color }) => {
                if (grouped[key].length > 0) {
                    tableHtml += `<h3 style="color: ${color}; margin-top: 40px;">${label}</h3>`;
                    tableHtml += `<table class="vocab-table ${key}">
                        <thead>
                            <tr>
                                <th>Article</th>
                                <th>German</th>
                                <th>Plural</th>
                                <th>English</th>
                                <th>Audio</th>
                            </tr>
                        </thead>
                        <tbody>`;

                    grouped[key].forEach(word => {
                        const escapedSingular = word.german.replace(/'/g, "\\'");
                        const escapedPlural = word.pluralFull.replace(/'/g, "\\'");

                        tableHtml += `<tr onclick="speakNounRow('${word.article}', '${escapedSingular}', '${escapedPlural}')">
                            <td class="article ${word.article}">${word.article}</td>
                            <td class="german-word">${word.german}</td>
                            <td class="plural">${word.pluralNotation}</td>
                            <td class="english-word">${word.english}</td>
                            <td><button class="audio-btn" onclick="event.stopPropagation(); speakNounWithPlural('${word.article}', '${escapedSingular}', '${escapedPlural}')">üîä</button></td>
                        </tr>`;
                    });

                    tableHtml += `</tbody></table>`;
                }
            });

            // ============================================
            // MOBILE CARD VIEW
            // ============================================
            let mobileHtml = '<div class="mobile-noun-cards">';

            articles.forEach(({ key, label, color }) => {
                if (grouped[key].length > 0) {
                    mobileHtml += `<h3 style="color: ${color}; margin-top: 30px; margin-bottom: 15px;">${label}</h3>`;

                    grouped[key].forEach(word => {
                        const escapedSingular = word.german.replace(/'/g, "\\'");
                        const escapedPlural = word.pluralFull.replace(/'/g, "\\'");

                        mobileHtml += `
                        <div class="mobile-noun-card ${word.article}" onclick="speakNounRow('${word.article}', '${escapedSingular}', '${escapedPlural}')">
                            <div class="mobile-noun-header">
                                <div class="mobile-article-word ${word.article}">
                                    <span>${word.article}</span>
                                    <span>${word.german}</span>
                                </div>
                                <button class="mobile-audio-btn" onclick="event.stopPropagation(); speakNounWithPlural('${word.article}', '${escapedSingular}', '${escapedPlural}')">üîä</button>
                            </div>
                            <div class="mobile-noun-details">
                                <span class="mobile-label">Plural:</span>
                                <span class="mobile-plural">${word.pluralNotation}</span>
                                <span class="mobile-label">English:</span>
                                <span class="mobile-english">${word.english}</span>
                            </div>
                        </div>`;
                    });
                }
            });

            mobileHtml += '</div>';

            // Combine both views
            document.getElementById('nounsContainer').innerHTML = tableHtml + mobileHtml;
        }

        function renderAdjectives() {
            const data = parseCSV(adjectivesCSV);
            let html = '';

            data.forEach(row => {
                const [word1, english1, word2, english2] = row;
                html += `<div class="word-pair" onclick="speakAdjective('${word1}', '${word2}')">
                    <div class="card-audio-btn">üîä</div>
                    <div class="german">${word1}</div>
                    <div class="english">${english1}</div>
                    <div class="opposite-arrow">‚ü∑</div>
                    <div class="german">${word2}</div>
                    <div class="english">${english2}</div>
                </div>`;
            });

            document.getElementById('adjectivesContainer').innerHTML = html;
        }

        function renderVerbs() {
            const data = parseCSV(verbsCSV);
            let html = '';

            data.forEach(row => {
                const [type, verb1, english1, verb2, english2] = row;
                const prefix = type === 'weak' ? '*' : '+';
                const gradient = type === 'weak' 
                    ? 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
                    : 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)';
                
                html += `<div class="word-pair" style="background: ${gradient};" onclick="speakVerb('${verb1}', '${verb2}')">
                    <div class="card-audio-btn">üîä</div>
                    <div class="german">${prefix}${verb1}</div>
                    <div class="english">${english1}</div>
                    <div class="opposite-arrow">‚ü∑</div>
                    <div class="german">${prefix}${verb2}</div>
                    <div class="english">${english2}</div>
                </div>`;
            });

            document.getElementById('verbsContainer').innerHTML = html;
        }

        function renderExpressions() {
            const data = parseCSV(expressionsCSV);
            let html = '';

            data.forEach(row => {
                const [german, english] = row;
                const escapedGerman = german.replace(/'/g, "\\'");
                html += `<li class="expression-item" onclick="speak('${escapedGerman}')">
                    <div class="expression-german">${german} üîä</div>
                    <div class="expression-english">${english}</div>
                </li>`;
            });

            document.getElementById('expressionsContainer').innerHTML = html;
        }

        function renderConversations() {
            const data = parseCSV(conversationsCSV);
            const conversations = {};

            data.forEach(row => {
                const [titleSpeaker, german, english] = row;
                const [title, speaker] = titleSpeaker.split('|');
                
                if (!conversations[title]) {
                    conversations[title] = [];
                }
                conversations[title].push({ speaker, german, english });
            });

            let html = '';
            Object.keys(conversations).forEach((title, index) => {
                html += `<h3 style="color: #667eea; margin-top: ${index > 0 ? '40px' : '30px'};">Conversation ${index + 1}: ${title}</h3>`;
                html += `<div class="conversation">`;
                
                conversations[title].forEach(msg => {
                    const messageClass = msg.speaker === 'A' ? 'message-a' : 'message-b';
                    const escapedGerman = msg.german.replace(/'/g, "\\'");
                    html += `<div class="message ${messageClass}" onclick="speak('${escapedGerman}')">
                        <div class="message-german">${msg.german} üîä</div>
                        <div class="message-english">${msg.english}</div>
                    </div>`;
                });
                
                html += `</div>`;
            });

            document.getElementById('conversationsContainer').innerHTML = html;
        }

        function renderQA() {
            const data = parseCSV(qaCSV);
            let html = '';

            data.forEach(row => {
                const [question, answer] = row;
                const escapedQ = question.replace(/'/g, "\\'");
                const escapedA = answer.replace(/'/g, "\\'");
                html += `<div class="qa-card" onclick="speakQA('${escapedQ}', '${escapedA}')">
                    <div class="question">${question} üîä</div>
                    <div class="answer">${answer}</div>
                </div>`;
            });

            document.getElementById('qaContainer').innerHTML = html;
        }

        function renderSentences() {
            const data = parseCSV(sentencesCSV);
            let html = '';

            data.forEach(row => {
                const [german, english] = row;
                const escapedGerman = german.replace(/'/g, "\\'");
                html += `<div class="sentence-card" onclick="speak('${escapedGerman}')">
                    <div class="sentence-german">${german} üîä</div>
                    <div class="sentence-english">${english}</div>
                </div>`;
            });

            document.getElementById('sentencesContainer').innerHTML = html;
        }

        // ============================================
        // KEYBOARD SHORTCUTS
        // ============================================
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;

            if (e.key === 's' || e.key === 'S' || e.key === 'Escape') {
                stopAllSpeech();
                playAllActive = false;
                const playBtn = document.querySelector('.play-all-btn');
                if (playBtn) playBtn.textContent = '‚ñ∂ Play All in Section';
                console.log('‚èπÔ∏è Stopped by keyboard');
            }

            if (e.key === 'p' || e.key === 'P') {
                playAllInSection();
            }

            const tabMap = {
                '1': 'nouns',
                '2': 'adjectives',
                '3': 'verbs',
                '4': 'expressions',
                '5': 'conversations',
                '6': 'qa',
                '7': 'sentences'
            };

            if (tabMap[e.key]) {
                const buttons = document.querySelectorAll('.tab-button');
                buttons.forEach((btn, idx) => {
                    if (Object.values(tabMap)[idx] === tabMap[e.key]) {
                        btn.click();
                    }
                });
            }
        });

        // ============================================
        // CLEANUP
        // ============================================
        window.addEventListener('beforeunload', function() {
            stopAllSpeech();
        });

        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopAllSpeech();
                playAllActive = false;
            }
        });

        // ============================================
        // INITIALIZE
        // ============================================
        window.addEventListener('load', function() {
            console.log('üá©üá™ German Vocabulary Loaded!');
            console.log('üí° Shortcuts: S/Esc=Stop | P=Play All | 1-7=Tabs');

            renderNouns();
            renderAdjectives();
            renderVerbs();
            renderExpressions();
            renderConversations();
            renderQA();
            renderSentences();

            loadVoices();
            setTimeout(loadVoices, 100);
            setTimeout(loadVoices, 500);
            setTimeout(loadVoices, 1000);

            if (!('speechSynthesis' in window)) {
                alert('‚ö†Ô∏è Text-to-speech not supported.\n\nPlease use Chrome, Firefox, Edge, or Safari.');
            }
        });
    </script>
</body>
</html>